<!DOCTYPE html>
<html lang="sw" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Pata nyumba bora Tanzania - Bedsitter, Chumba, Apartment Dar es Salaam, Arusha, Mwanza" />
  <meta name="theme-color" content="#0d9488" />
  <title>HouseLink - Nyumba Bora Tanzania</title>
  <link rel="icon" href="https://via.placeholder.com/64/0d9488/ffffff?text=HL" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; }
    .gradient-bg { background: linear-gradient(135deg, #0d9488 0%, #14b8a6 100%); }
    .card-hover { transition: transform 0.3s, box-shadow 0.3s; }
    .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1); }
  </style>
</head>
<body class="bg-gray-50 text-gray-900 min-h-screen">
  <div id="app"></div>

  <script>
    // Simple Vanilla JavaScript App - No React dependencies
    
    const listings = [
      {
        id: 1,
        title: "Bedsitter Sinza",
        location: "Sinza",
        price: 135000,
        type: "Bedsitter",
        image: "https://images.unsplash.com/photo-1560184897-ae75f418493e?auto=format&fit=crop&w=800&q=80",
        phone: "+255712345678",
        description: "Bedsitter nzuri Sinza, maji 24/7, karibu na chuo kikuu",
        featured: true,
        verified: true
      },
      {
        id: 2,
        title: "Chumba cha Kisasa Mbezi",
        location: "Mbezi",
        price: 98000,
        type: "Single Room",
        image: "https://images.unsplash.com/photo-1598928506311-c55ded91a20c?auto=format&fit=crop&w=800&q=80",
        phone: "+255765432109",
        description: "Chumba kizuri Mbezi Beach, tiles zote, dirisha zuri",
        urgent: true
      },
      {
        id: 3,
        title: "Apartment Masaki",
        location: "Masaki",
        price: 950000,
        type: "Apartment",
        image: "https://images.unsplash.com/photo-1512917774080-9991f1c4c750?auto=format&fit=crop&w=800&q=80",
        phone: "+255788888888",
        description: "Apartment ya kisasa Masaki, mtazamo wa bahari",
        featured: true,
        verified: true
      }
    ];

    // Simple Router
    const router = {
      currentPath: window.location.hash || '#/',
      
      navigate(hash) {
        window.location.hash = hash;
        this.currentPath = hash;
        this.render();
      },
      
      render() {
        const app = document.getElementById('app');
        app.innerHTML = '';
        
        switch(this.currentPath) {
          case '#/':
            app.appendChild(renderHome());
            break;
          case '#/listings':
            app.appendChild(renderListings());
            break;
          case '#/upload':
            app.appendChild(renderUpload());
            break;
          default:
            if (this.currentPath.startsWith('#/listing/')) {
              const id = parseInt(this.currentPath.split('/')[2]);
              app.appendChild(renderListingDetail(id));
            } else {
              app.appendChild(renderHome());
            }
        }
        
        // Update active nav link
        document.querySelectorAll('nav a').forEach(link => {
          link.classList.remove('bg-white/20');
          if (link.getAttribute('href') === this.currentPath) {
            link.classList.add('bg-white/20');
          }
        });
      }
    };

    // Components
    function renderNav() {
      const nav = document.createElement('nav');
      nav.className = 'gradient-bg text-white sticky top-0 z-50 shadow-lg';
      nav.innerHTML = `
        <div class="max-w-7xl mx-auto px-4 py-4">
          <div class="flex justify-between items-center">
            <a href="#/" class="text-2xl font-bold flex items-center gap-2">
              <i class="fas fa-home"></i>
              HouseLink
            </a>
            
            <div class="flex items-center gap-4">
              <a href="#/listings" class="hover:bg-white/10 px-4 py-2 rounded-lg transition">Orodha Zote</a>
              <a href="#/upload" class="bg-white text-teal-600 hover:bg-gray-100 px-6 py-2 rounded-full font-bold">
                <i class="fas fa-plus mr-2"></i> Weka Tangazo
              </a>
              <button onclick="toggleDarkMode()" class="p-2 hover:bg-white/10 rounded-full">
                <i class="fas fa-moon"></i>
              </button>
            </div>
          </div>
        </div>
      `;
      
      // Add click handlers
      nav.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          router.navigate(link.getAttribute('href'));
        });
      });
      
      return nav;
    }

    function renderFooter() {
      const footer = document.createElement('footer');
      footer.className = 'bg-gray-800 text-white mt-20';
      footer.innerHTML = `
        <div class="max-w-7xl mx-auto px-6 py-12">
          <div class="text-center">
            <h3 class="text-2xl font-bold mb-4">HouseLink Tanzania</h3>
            <p class="text-gray-400">Pata nyumba bora Tanzania</p>
            <div class="mt-8 pt-8 border-t border-gray-700">
              <p class="text-gray-500">© 2024 HouseLink. Haki zote zimehifadhiwa.</p>
            </div>
          </div>
        </div>
      `;
      return footer;
    }

    function renderHome() {
      const container = document.createElement('div');
      container.className = 'animate-fade-in';
      
      // Hero Section
      const hero = document.createElement('div');
      hero.className = 'gradient-bg text-white py-20 md:py-32 text-center';
      hero.innerHTML = `
        <div class="max-w-6xl mx-auto px-6">
          <h1 class="text-4xl md:text-6xl font-extrabold leading-tight mb-6">
            Pata Nyumba Bora Tanzania
          </h1>
          <p class="text-xl md:text-2xl mb-10 opacity-90">
            Dar es Salaam • Arusha • Mwanza • Dodoma • Mbeya
          </p>
          <a href="#/listings" class="inline-block bg-white text-teal-600 hover:bg-gray-100 px-10 py-4 rounded-full text-xl font-bold shadow-xl">
            <i class="fas fa-search mr-3"></i> Anza Kutafuta
          </a>
        </div>
      `;
      
      // Stats Section
      const stats = document.createElement('div');
      stats.className = 'max-w-6xl mx-auto px-6 py-16';
      stats.innerHTML = `
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
          <div class="text-center">
            <div class="text-4xl font-bold text-teal-600 mb-2">5,000+</div>
            <div class="text-gray-600">Nyumba Zilizopo</div>
          </div>
          <div class="text-center">
            <div class="text-4xl font-bold text-teal-600 mb-2">10,000+</div>
            <div class="text-gray-600">Watumiaji</div>
          </div>
          <div class="text-center">
            <div class="text-4xl font-bold text-teal-600 mb-2">25+</div>
            <div class="text-gray-600">Miji</div>
          </div>
          <div class="text-center">
            <div class="text-4xl font-bold text-teal-600 mb-2">1,200+</div>
            <div class="text-gray-600">Zilizothibitishwa</div>
          </div>
        </div>
      `;
      
      // Featured Listings
      const featured = document.createElement('div');
      featured.className = 'max-w-7xl mx-auto px-6 py-12';
      featured.innerHTML = `
        <h2 class="text-3xl font-bold mb-8 text-center">Nyumba Zilizoangaziwa</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          ${listings.filter(l => l.featured).map(listing => `
            <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
              <div class="relative h-48">
                <img src="${listing.image}" alt="${listing.title}" class="w-full h-full object-cover">
                ${listing.verified ? `
                  <div class="absolute top-3 left-3 bg-blue-600 text-white px-3 py-1 rounded-full text-xs font-bold">
                    <i class="fas fa-check-circle mr-1"></i> Verified
                  </div>
                ` : ''}
              </div>
              <div class="p-6">
                <h3 class="font-bold text-lg mb-2">${listing.title}</h3>
                <p class="text-gray-600 mb-4">
                  <i class="fas fa-map-marker-alt text-teal-600 mr-2"></i>
                  ${listing.location}
                </p>
                <div class="flex justify-between items-center">
                  <span class="text-2xl font-bold text-orange-500">${listing.price.toLocaleString()} TZS</span>
                  <a href="#/listing/${listing.id}" class="text-teal-600 font-bold hover:underline">
                    Angalia <i class="fas fa-arrow-right ml-1"></i>
                  </a>
                </div>
              </div>
            </div>
          `).join('')}
        </div>
        <div class="text-center mt-10">
          <a href="#/listings" class="inline-block bg-teal-600 text-white hover:bg-teal-700 px-8 py-3 rounded-full font-bold">
            Angalia Zote <i class="fas fa-arrow-right ml-2"></i>
          </a>
        </div>
      `;
      
      // How It Works
      const howItWorks = document.createElement('div');
      howItWorks.className = 'max-w-7xl mx-auto px-6 py-16';
      howItWorks.innerHTML = `
        <h2 class="text-3xl font-bold mb-10 text-center">Jinsi Inavyofanya Kazi</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div class="bg-white p-8 rounded-2xl shadow text-center">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-teal-100 rounded-full mb-6">
              <i class="fas fa-search text-teal-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold mb-3">Tafuta</h3>
            <p class="text-gray-600">Tafuta nyumba kwa eneo, bei, au aina</p>
          </div>
          <div class="bg-white p-8 rounded-2xl shadow text-center">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-teal-100 rounded-full mb-6">
              <i class="fas fa-phone-alt text-teal-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold mb-3">Wasiliana</h3>
            <p class="text-gray-600">Piga simu au tuma ujumbe kupitia WhatsApp</p>
          </div>
          <div class="bg-white p-8 rounded-2xl shadow text-center">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-teal-100 rounded-full mb-6">
              <i class="fas fa-home text-teal-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold mb-3">Kaa</h3>
            <p class="text-gray-600">Pata nyumba bora na ukae kwa raha</p>
          </div>
        </div>
      `;
      
      container.appendChild(hero);
      container.appendChild(stats);
      container.appendChild(featured);
      container.appendChild(howItWorks);
      
      // Add click handlers
      container.querySelectorAll('a[href^="#"]').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          router.navigate(link.getAttribute('href'));
        });
      });
      
      return container;
    }

    function renderListings() {
      const container = document.createElement('div');
      container.className = 'max-w-7xl mx-auto p-4 md:p-6 animate-fade-in';
      
      container.innerHTML = `
        <h1 class="text-3xl md:text-4xl font-bold mb-2">Orodha Zote</h1>
        <p class="text-gray-600 mb-8">Nyumba ${listings.length} zilizopatikana</p>
        
        <!-- Search Bar -->
        <div class="mb-8">
          <div class="relative">
            <input 
              type="text" 
              placeholder="Tafuta nyumba..." 
              class="w-full p-4 pl-12 border rounded-xl text-lg"
              id="searchInput"
            >
            <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
          </div>
        </div>
        
        <!-- Filters -->
        <div class="bg-white rounded-xl p-6 shadow-lg mb-8">
          <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <select class="p-3 border rounded-lg" id="locationFilter">
              <option value="">Chagua Eneo</option>
              <option value="Sinza">Sinza</option>
              <option value="Mbezi">Mbezi</option>
              <option value="Masaki">Masaki</option>
              <option value="Upanga">Upanga</option>
            </select>
            
            <select class="p-3 border rounded-lg" id="typeFilter">
              <option value="">Chagua Aina</option>
              <option value="Bedsitter">Bedsitter</option>
              <option value="Single Room">Chumba</option>
              <option value="Apartment">Apartment</option>
              <option value="Studio">Studio</option>
            </select>
            
            <input 
              type="number" 
              placeholder="Bei ya chini" 
              class="p-3 border rounded-lg"
              id="minPrice"
            >
            
            <button onclick="applyFilters()" class="bg-teal-600 hover:bg-teal-700 text-white p-3 rounded-lg font-bold">
              <i class="fas fa-filter mr-2"></i> Chuja
            </button>
          </div>
        </div>
        
        <!-- Listings Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8" id="listingsContainer">
          ${renderListingCards(listings)}
        </div>
        
        ${listings.length === 0 ? `
          <div class="text-center py-20">
            <i class="fas fa-search text-gray-400 text-6xl mb-6"></i>
            <h3 class="text-2xl font-bold mb-2">Hakuna tangazo lililopatikana</h3>
            <p class="text-gray-600 mb-8">Jaribu kubadilisha vichujio vyako</p>
            <a href="#/upload" class="bg-teal-600 text-white px-8 py-3 rounded-full font-bold">
              <i class="fas fa-plus mr-2"></i> TANGAZA NYUMBA
            </a>
          </div>
        ` : ''}
      `;
      
      return container;
    }

    function renderListingCards(listingsArray) {
      return listingsArray.map(listing => `
        <div class="bg-white rounded-2xl shadow-lg overflow-hidden card-hover">
          <div class="relative">
            <img 
              src="${listing.image}" 
              alt="${listing.title}" 
              class="w-full h-64 object-cover"
            >
            <div class="absolute top-3 left-3 flex gap-2">
              ${listing.verified ? `
                <span class="bg-blue-600 text-white px-3 py-1 rounded-full text-xs font-bold">
                  <i class="fas fa-check-circle mr-1"></i> Verified
                </span>
              ` : ''}
              ${listing.urgent ? `
                <span class="bg-red-600 text-white px-3 py-1 rounded-full text-xs font-bold">
                  <i class="fas fa-clock mr-1"></i> Urgent
                </span>
              ` : ''}
            </div>
          </div>
          <div class="p-6">
            <h3 class="text-xl font-bold">${listing.title}</h3>
            <p class="text-gray-600 mt-1">
              <i class="fas fa-map-marker-alt text-teal-600 mr-2"></i>
              ${listing.location} • ${listing.type}
            </p>
            <div class="flex justify-between items-center mt-4">
              <span class="text-2xl font-extrabold text-orange-500">${listing.price.toLocaleString()} TZS</span>
              <a 
                href="#/listing/${listing.id}"
                class="text-teal-600 font-bold hover:underline flex items-center gap-2"
              >
                Angalia <i class="fas fa-arrow-right"></i>
              </a>
            </div>
          </div>
        </div>
      `).join('');
    }

    function renderListingDetail(id) {
      const listing = listings.find(l => l.id === id);
      if (!listing) {
        const container = document.createElement('div');
        container.className = 'text-center py-32';
        container.innerHTML = `
          <i class="fas fa-home text-gray-400 text-6xl mb-6"></i>
          <h1 class="text-4xl font-bold mb-4">Tangazo halipatikani</h1>
          <a href="#/listings" class="bg-teal-600 text-white px-8 py-3 rounded-full font-bold">
            Rudi kwenye orodha
          </a>
        `;
        return container;
      }
      
      const container = document.createElement('div');
      container.className = 'max-w-6xl mx-auto p-4 animate-fade-in';
      container.innerHTML = `
        <!-- Breadcrumb -->
        <div class="mb-6">
          <a href="#/" class="text-teal-600 hover:underline">Nyumbani</a>
          <span class="mx-2">/</span>
          <a href="#/listings" class="text-teal-600 hover:underline">Orodha</a>
          <span class="mx-2">/</span>
          <span class="text-gray-600">${listing.title}</span>
        </div>
        
        <!-- Property Details -->
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
          <div class="relative h-64 md:h-96">
            <img 
              src="${listing.image}" 
              alt="${listing.title}" 
              class="w-full h-full object-cover"
            >
            <div class="absolute top-4 left-4 flex gap-2">
              ${listing.verified ? `
                <span class="bg-blue-600 text-white px-4 py-2 rounded-full text-sm font-bold">
                  <i class="fas fa-check-circle"></i> Verified
                </span>
              ` : ''}
              ${listing.urgent ? `
                <span class="bg-red-600 text-white px-4 py-2 rounded-full text-sm font-bold">
                  <i class="fas fa-clock"></i> Urgent
                </span>
              ` : ''}
            </div>
          </div>
          
          <div class="p-6 md:p-8">
            <div class="flex flex-col md:flex-row justify-between items-start mb-6">
              <div>
                <h1 class="text-3xl md:text-4xl font-bold">${listing.title}</h1>
                <p class="text-xl text-gray-600 mt-2">
                  <i class="fas fa-map-marker-alt text-teal-600 mr-2"></i>
                  ${listing.location}
                </p>
              </div>
              <div class="mt-4 md:mt-0 text-right">
                <div class="text-4xl md:text-5xl font-bold text-orange-500">${listing.price.toLocaleString()} TZS</div>
                <div class="text-gray-600">kwa mwezi</div>
              </div>
            </div>
            
            <div class="mb-8">
              <h3 class="text-2xl font-bold mb-4">Maelezo</h3>
              <p class="text-lg text-gray-700 leading-relaxed">${listing.description}</p>
            </div>
            
            <!-- Contact Buttons -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <a 
                href="https://wa.me/${listing.whatsapp || listing.phone}?text=Habari! Naomba kujua kuhusu nyumba hii: ${encodeURIComponent(listing.title)}"
                target="_blank"
                class="bg-green-600 hover:bg-green-700 text-white p-4 rounded-xl flex items-center justify-center gap-3 font-bold text-lg"
              >
                <i class="fab fa-whatsapp text-2xl"></i>
                <span>WhatsApp</span>
              </a>
              
              <a 
                href="tel:${listing.phone}"
                class="bg-teal-600 hover:bg-teal-700 text-white p-4 rounded-xl flex items-center justify-center gap-3 font-bold text-lg"
            >
                <i class="fas fa-phone-alt text-2xl"></i>
                <span>Piga Simu</span>
              </a>
            </div>
            
            <!-- Additional Info -->
            <div class="mt-8 pt-8 border-t">
              <h4 class="text-xl font-bold mb-4">Taarifa za Ziada</h4>
              <div class="grid grid-cols-2 gap-4">
                <div class="flex justify-between">
                  <span class="text-gray-600">Aina ya Nyumba:</span>
                  <span class="font-bold">${listing.type}</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-gray-600">Eneo:</span>
                  <span class="font-bold">${listing.location}</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-gray-600">Nambari ya Simu:</span>
                  <span class="font-bold">${listing.phone}</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-gray-600">Hali:</span>
                  <span class="font-bold">${listing.urgent ? 'Haraka' : 'Kawaida'}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Emergency Contacts -->
        <div class="mt-8 bg-red-50 border border-red-200 rounded-2xl p-6">
          <h4 class="text-xl font-bold text-red-700 mb-4">
            <i class="fas fa-phone-alt mr-2"></i>
            Nambari za Dharura
          </h4>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="flex justify-between">
              <span class="font-medium">Polisi:</span>
              <a href="tel:112" class="text-red-600 font-bold">112 / 111</a>
            </div>
            <div class="flex justify-between">
              <span class="font-medium">Zima moto:</span>
              <a href="tel:114" class="text-red-600 font-bold">114</a>
            </div>
          </div>
        </div>
      `;
      
      // Add click handlers
      container.querySelectorAll('a[href^="#"]').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          router.navigate(link.getAttribute('href'));
        });
      });
      
      return container;
    }

    function renderUpload() {
      const container = document.createElement('div');
      container.className = 'max-w-4xl mx-auto p-4 animate-fade-in';
      container.innerHTML = `
        <div class="bg-white rounded-3xl shadow-2xl p-6 md:p-10">
          <h1 class="text-4xl font-bold mb-2">Weka Tangazo</h1>
          <p class="text-gray-600 mb-8">Weka tangazo lako la nyumba kwa urahisi</p>
          
          <form id="uploadForm" class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label class="block text-sm font-medium mb-2">Kichwa cha Tangazo *</label>
                <input 
                  type="text"
                  placeholder="Mf: Bedsitter nzuri Sinza"
                  required
                  class="w-full p-4 border rounded-xl"
                />
              </div>
              <div>
                <label class="block text-sm font-medium mb-2">Bei (TZS) *</label>
                <input 
                  type="number"
                  placeholder="Mf: 135000"
                  required
                  class="w-full p-4 border rounded-xl"
                />
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-2">Eneo *</label>
                <select required class="w-full p-4 border rounded-xl">
                  <option value="">Chagua Eneo</option>
                  <option>Sinza</option>
                  <option>Mbezi</option>
                  <option>Masaki</option>
                  <option>Upanga</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium mb-2">Aina ya Nyumba *</label>
                <select required class="w-full p-4 border rounded-xl">
                  <option value="">Chagua Aina</option>
                  <option>Bedsitter</option>
                  <option>Single Room</option>
                  <option>Apartment</option>
                  <option>Studio</option>
                </select>
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-2">Namba ya Simu *</label>
                <input 
                  type="tel"
                  placeholder="+255712345678"
                  required
                  class="w-full p-4 border rounded-xl"
                />
              </div>
              <div>
                <label class="block text-sm font-medium mb-2">WhatsApp</label>
                <input 
                  type="tel"
                  placeholder="+255712345678"
                  class="w-full p-4 border rounded-xl"
                />
              </div>
            </div>
            
            <div>
              <label class="block text-sm font-medium mb-2">Maelezo zaidi *</label>
              <textarea 
                rows="4"
                placeholder="Eleza nyumba yako kwa kina..."
                required
                class="w-full p-4 border rounded-xl"
              ></textarea>
            </div>
            
            <button 
              type="submit"
              class="w-full bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white py-4 rounded-xl font-bold text-xl shadow-lg"
            >
              Chapisha Tangazo
            </button>
          </form>
        </div>
      `;
      
      container.querySelector('#uploadForm').addEventListener('submit', function(e) {
        e.preventDefault();
        alert('Tangazo limewekwa kikamilifu!');
        router.navigate('#/listings');
      });
      
      return container;
    }

    // Global Functions
    window.toggleDarkMode = function() {
      document.body.classList.toggle('dark');
      const icon = document.querySelector('button[onclick="toggleDarkMode()"] i');
      if (document.body.classList.contains('dark')) {
        document.body.classList.add('bg-gray-900', 'text-gray-100');
        document.body.classList.remove('bg-gray-50', 'text-gray-900');
        icon.className = 'fas fa-sun';
      } else {
        document.body.classList.add('bg-gray-50', 'text-gray-900');
        document.body.classList.remove('bg-gray-900', 'text-gray-100');
        icon.className = 'fas fa-moon';
      }
    };

    window.applyFilters = function() {
      const location = document.getElementById('locationFilter')?.value || '';
      const type = document.getElementById('typeFilter')?.value || '';
      const minPrice = document.getElementById('minPrice')?.value || '';
      const search = document.getElementById('searchInput')?.value.toLowerCase() || '';
      
      let filtered = [...listings];
      
      if (location) {
        filtered = filtered.filter(l => l.location === location);
      }
      
      if (type) {
        filtered = filtered.filter(l => l.type === type);
      }
      
      if (minPrice) {
        filtered = filtered.filter(l => l.price >= parseInt(minPrice));
      }
      
      if (search) {
        filtered = filtered.filter(l => 
          l.title.toLowerCase().includes(search) || 
          l.location.toLowerCase().includes(search) ||
          l.description.toLowerCase().includes(search)
        );
      }
      
      const container = document.getElementById('listingsContainer');
      if (container) {
        container.innerHTML = renderListingCards(filtered);
        
        // Reattach click handlers
        container.querySelectorAll('a[href^="#"]').forEach(link => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            router.navigate(link.getAttribute('href'));
          });
        });
      }
    };

    // Initialize App
    function initApp() {
      const app = document.getElementById('app');
      
      // Create main container
      const mainContainer = document.createElement('div');
      mainContainer.className = 'min-h-screen flex flex-col';
      
      // Add navbar
      mainContainer.appendChild(renderNav());
      
      // Add content container
      const content = document.createElement('main');
      content.className = 'flex-1';
      content.id = 'content';
      mainContainer.appendChild(content);
      
      // Add footer
      mainContainer.appendChild(renderFooter());
      
      // Add floating buttons
      const floatingButtons = document.createElement('div');
      floatingButtons.innerHTML = `
        <button 
          onclick="window.scrollTo({top:0, behavior:'smooth'})" 
          class="fixed bottom-8 right-8 bg-teal-600 hover:bg-teal-700 text-white p-4 rounded-full shadow-2xl z-40"
        >
          <i class="fas fa-chevron-up"></i>
        </button>
        <a 
          href="#emergency" 
          class="fixed bottom-8 left-8 bg-red-600 hover:bg-red-700 text-white p-4 rounded-full shadow-2xl z-40"
        >
          <i class="fas fa-phone-alt"></i>
        </a>
      `;
      mainContainer.appendChild(floatingButtons);
      
      app.appendChild(mainContainer);
      
      // Initialize router
      window.addEventListener('hashchange', () => {
        router.currentPath = window.location.hash;
        router.render();
      });
      
      // Initial render
      router.render();
    }

    // Start the app when page loads
    document.addEventListener('DOMContentLoaded', initApp);
  </script>
</body>
</html>
