<!DOCTYPE html>
<html lang="sw">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HouseLink Tanzania - Nyumba Bora</title>
  <style>
    /* Reset and Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      background: #f8fafc;
      color: #1e293b;
      transition: background 0.3s, color 0.3s;
      line-height: 1.6;
      overflow-x: hidden;
    }

    body.dark-mode {
      background: #0f172a;
      color: #f1f5f9;
    }

    /* Loading Screen */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #0d9488 0%, #14b8a6 100%);
      z-index: 9999;
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 5px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
      margin-bottom: 20px;
    }

    .hidden {
      display: none !important;
    }

    /* Main App Container */
    #app {
      width: 100%;
      max-width: 100vw;
      overflow-x: hidden;
    }

    /* Animations */
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* Scrollbar Styling */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    ::-webkit-scrollbar-thumb {
      background: #0d9488;
      border-radius: 4px;
    }

    .dark-mode ::-webkit-scrollbar-track {
      background: #1e293b;
    }

    .dark-mode ::-webkit-scrollbar-thumb {
      background: #14b8a6;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .mobile-hidden {
        display: none !important;
      }
      
      .mobile-full-width {
        width: 100% !important;
      }
      
      .mobile-stack {
        flex-direction: column !important;
      }
    }
  </style>
</head>
<body>
  <div class="loading-screen">
    <div class="spinner"></div>
    <h2 style="color: white; margin-bottom: 10px;">HouseLink Tanzania</h2>
    <p style="color: white;">Inapakia tovuti...</p>
  </div>

  <div id="app" class="hidden"></div>

  <script>
    window.addEventListener('load', function() {
      setTimeout(function() {
        document.querySelector('.loading-screen').style.display = 'none';
        document.getElementById('app').classList.remove('hidden');
      }, 1000);
    });
  </script>

  <!-- External libraries - PRODUCTION VERSIONS -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>

  <script type="text/babel" data-presets="env,react">
    // ================ CONFIGURATION ================
    const CONFIG = {
      LOCATIONS: ["Sinza", "Ubungo", "Mbezi", "Tegeta", "Masaki", "Upanga", "Kariakoo", "Kinondoni", "Mwenge"],
      PROPERTY_TYPES: ["Bedsitter", "Single Room", "Apartment", "Studio", "Duplex", "House"],
      AMENITIES: [
        { id: "water", label: "Maji 24/7", icon: "üíß" },
        { id: "security", label: "Ulinzi", icon: "üõ°Ô∏è" },
        { id: "parking", label: "Parking", icon: "üöó" },
        { id: "wifi", label: "Wi-Fi", icon: "üì∂" },
        { id: "generator", label: "Jenereta", icon: "‚ö°" },
        { id: "furnished", label: "Samani", icon: "üõãÔ∏è" }
      ]
    };

    // ================ TRANSLATIONS ================
    const translations = {
      sw: {
        appName: "HouseLink",
        home: "Nyumbani",
        listings: "Nyumba",
        upload: "Weka Tangazo",
        favorites: "Vipendwa",
        login: "Ingia",
        logout: "Toka",
        signup: "Jisajili",
        darkMode: "Hali ya Giza",
        language: "Lugha",
        search: "Tafuta nyumba...",
        filter: "Chuja",
        price: "Bei",
        location: "Eneo",
        type: "Aina",
        bedrooms: "Vyumba",
        bathrooms: "Bafu",
        contact: "Wasiliana",
        schedule: "Panga Uangalizi",
        message: "Tuma Ujumbe",
        edit: "Hariri",
        delete: "Futa",
        save: "Hifadhi",
        share: "Shiriki",
        broker: "Wakala",
        buyer: "Mnunuzi",
        role: "Chagua Jukumu",
        name: "Jina",
        email: "Barua Pepe",
        phone: "Simu",
        password: "Nenosiri",
        confirmPassword: "Thibitisha Nenosiri",
        myListings: "Tangazo Zangu",
        myMessages: "Ujumbe Wangu",
        dashboard: "Dashibodi",
        welcome: "Karibu",
        featured: "Zilizoangaziwa",
        recent: "Hivi Karibuni",
        viewAll: "Angalia Zote",
        about: "Kuhusu",
        contactUs: "Wasiliana Nasi",
        privacy: "Faragha",
        terms: "Masharti",
        copyright: "¬© 2024 HouseLink Tanzania",
        allRights: "Haki zote zimehifadhiwa",
        description: "Maelezo",
        amenities: "Vifaa",
        available: "Inapatikana",
        notAvailable: "Haipatikani",
        bookViewing: "Panga Uangalizi",
        sendMessage: "Tuma Ujumbe kwa Wakala",
        yourMessage: "Ujumbe wako",
        send: "Tuma",
        cancel: "Ghairi",
        confirmDelete: "Thibitisha Kufuta",
        deleteConfirm: "Una uhakika unataka kufuta tangazo hili?",
        yes: "Ndio",
        no: "Hapana",
        saved: "Imehifadhiwa",
        removed: "Imeondolewa",
        success: "Imefanikiwa",
        error: "Hitilafu",
        loading: "Inapakia...",
        dontHaveAccount: "Huna akaunti?",
        exampleTitle: "Mf: Bedsitter Sinza",
        selectLocation: "Chagua Eneo",
        selectType: "Chagua Aina",
        select: "Chagua",
        descriptionPlaceholder: "Eleza nyumba yako kwa kina...",
        allLocations: "Eneo Zote",
        allTypes: "Aina Zote",
        noProperties: "Hakuna nyumba zilizopatikana",
        tryDifferentFilters: "Badilisha vichujio vyako au weka tangazo lako la kwanza",
        passwordsDontMatch: "Nenosiri halifanani"
      },
      en: {
        appName: "HouseLink",
        home: "Home",
        listings: "Properties",
        upload: "Post Listing",
        favorites: "Favorites",
        login: "Login",
        logout: "Logout",
        signup: "Sign Up",
        darkMode: "Dark Mode",
        language: "Language",
        search: "Search properties...",
        filter: "Filter",
        price: "Price",
        location: "Location",
        type: "Type",
        bedrooms: "Bedrooms",
        bathrooms: "Bathrooms",
        contact: "Contact",
        schedule: "Schedule Viewing",
        message: "Send Message",
        edit: "Edit",
        delete: "Delete",
        save: "Save",
        share: "Share",
        broker: "Broker",
        buyer: "Buyer",
        role: "Choose Role",
        name: "Name",
        email: "Email",
        phone: "Phone",
        password: "Password",
        confirmPassword: "Confirm Password",
        myListings: "My Listings",
        myMessages: "My Messages",
        dashboard: "Dashboard",
        welcome: "Welcome",
        featured: "Featured",
        recent: "Recent",
        viewAll: "View All",
        about: "About",
        contactUs: "Contact Us",
        privacy: "Privacy",
        terms: "Terms",
        copyright: "¬© 2024 HouseLink Tanzania",
        allRights: "All rights reserved",
        description: "Description",
        amenities: "Amenities",
        available: "Available",
        notAvailable: "Not Available",
        bookViewing: "Book Viewing",
        sendMessage: "Send Message to Broker",
        yourMessage: "Your Message",
        send: "Send",
        cancel: "Cancel",
        confirmDelete: "Confirm Delete",
        deleteConfirm: "Are you sure you want to delete this listing?",
        yes: "Yes",
        no: "No",
        saved: "Saved",
        removed: "Removed",
        success: "Success",
        error: "Error",
        loading: "Loading...",
        dontHaveAccount: "Don't have an account?",
        exampleTitle: "Ex: Bedsitter Sinza",
        selectLocation: "Select Location",
        selectType: "Select Type",
        select: "Select",
        descriptionPlaceholder: "Describe your property in detail...",
        allLocations: "All Locations",
        allTypes: "All Types",
        noProperties: "No properties found",
        tryDifferentFilters: "Try different filters or post your first listing",
        passwordsDontMatch: "Passwords don't match"
      }
    };

    // ================ UTILITIES ================
    const Storage = {
      set: (key, value) => {
        try {
          localStorage.setItem(key, JSON.stringify(value));
          return true;
        } catch (e) {
          console.error('Storage error:', e);
          return false;
        }
      },
      get: (key, defaultValue = null) => {
        try {
          const value = localStorage.getItem(key);
          return value ? JSON.parse(value) : defaultValue;
        } catch (e) {
          console.error('Storage error:', e);
          return defaultValue;
        }
      },
      remove: (key) => {
        try {
          localStorage.removeItem(key);
          return true;
        } catch (e) {
          console.error('Storage error:', e);
          return false;
        }
      }
    };

    const formatPrice = (price) => {
      if (!price) return 'TZS 0';
      return new Intl.NumberFormat('sw-TZ', {
        style: 'currency',
        currency: 'TZS',
        minimumFractionDigits: 0
      }).format(price);
    };

    const validateEmail = (email) => {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    };

    const validatePhone = (phone) => {
      const re = /^\+?[0-9\s\-\(\)]{10,}$/;
      return re.test(phone);
    };

    // ================ CONTEXT PROVIDERS ================
    const ThemeContext = React.createContext();
    const LanguageContext = React.createContext();
    const AuthContext = React.createContext();

    const ThemeProvider = ({ children }) => {
      const [darkMode, setDarkMode] = React.useState(
        Storage.get('darkMode', false)
      );

      React.useEffect(() => {
        if (darkMode) {
          document.body.classList.add('dark-mode');
        } else {
          document.body.classList.remove('dark-mode');
        }
        Storage.set('darkMode', darkMode);
      }, [darkMode]);

      const toggleDarkMode = () => setDarkMode(!darkMode);

      return (
        <ThemeContext.Provider value={{ darkMode, toggleDarkMode }}>
          {children}
        </ThemeContext.Provider>
      );
    };

    const LanguageProvider = ({ children }) => {
      const [language, setLanguage] = React.useState(
        Storage.get('language', 'sw')
      );

      const toggleLanguage = () => {
        const newLang = language === 'sw' ? 'en' : 'sw';
        setLanguage(newLang);
        Storage.set('language', newLang);
      };

      return (
        <LanguageContext.Provider value={{ 
          language, 
          setLanguage, 
          toggleLanguage,
          t: translations[language] 
        }}>
          {children}
        </LanguageContext.Provider>
      );
    };

    const AuthProvider = ({ children }) => {
      const [user, setUser] = React.useState(() => {
        const storedUser = Storage.get('user');
        // Don't store passwords in localStorage
        if (storedUser && storedUser.password) {
          delete storedUser.password;
          delete storedUser.confirmPassword;
        }
        return storedUser;
      });
      
      const [favorites, setFavorites] = React.useState(Storage.get('favorites', []));
      const [messages, setMessages] = React.useState(Storage.get('messages', []));

      const login = (userData) => {
        // Never store passwords in localStorage
        const safeUserData = { ...userData };
        delete safeUserData.password;
        delete safeUserData.confirmPassword;
        
        setUser(safeUserData);
        Storage.set('user', safeUserData);
      };

      const logout = () => {
        setUser(null);
        Storage.remove('user');
      };

      const signup = (userData) => {
        // Never store passwords
        const safeUserData = { ...userData };
        delete safeUserData.password;
        delete safeUserData.confirmPassword;
        
        setUser(safeUserData);
        Storage.set('user', safeUserData);
      };

      const toggleFavorite = (propertyId) => {
        const newFavorites = favorites.includes(propertyId)
          ? favorites.filter(id => id !== propertyId)
          : [...favorites, propertyId];
        setFavorites(newFavorites);
        Storage.set('favorites', newFavorites);
      };

      const sendMessage = (message) => {
        const newMessages = [...messages, { 
          ...message, 
          id: Date.now(), 
          timestamp: new Date().toISOString(),
          read: false 
        }];
        setMessages(newMessages);
        Storage.set('messages', newMessages);
      };

      const markMessageAsRead = (messageId) => {
        const updatedMessages = messages.map(msg =>
          msg.id === messageId ? { ...msg, read: true } : msg
        );
        setMessages(updatedMessages);
        Storage.set('messages', updatedMessages);
      };

      return (
        <AuthContext.Provider value={{
          user,
          login,
          logout,
          signup,
          favorites,
          toggleFavorite,
          messages,
          sendMessage,
          markMessageAsRead
        }}>
          {children}
        </AuthContext.Provider>
      );
    };

    // ================ COMPONENTS ================
    const Toast = ({ message, type, onClose }) => {
      React.useEffect(() => {
        const timer = setTimeout(() => {
          onClose();
        }, 3000);
        return () => clearTimeout(timer);
      }, [onClose]);

      return (
        <div style={{
          position: 'fixed',
          bottom: '20px',
          right: '20px',
          background: type === 'error' ? '#ef4444' : type === 'success' ? '#10b981' : '#3b82f6',
          color: 'white',
          padding: '12px 24px',
          borderRadius: '8px',
          boxShadow: '0 4px 12px rgba(0,0,0,0.15)',
          zIndex: 1000,
          animation: 'slideIn 0.3s ease-out',
          maxWidth: '90vw',
          wordBreak: 'break-word'
        }}>
          {message}
          <button 
            onClick={onClose}
            style={{
              background: 'none',
              border: 'none',
              color: 'white',
              marginLeft: '10px',
              cursor: 'pointer',
              fontSize: '1.2rem'
            }}
          >
            √ó
          </button>
        </div>
      );
    };

    const LoadingSkeleton = () => (
      <div style={{
        background: '#f8fafc',
        borderRadius: '12px',
        padding: '1rem',
        animation: 'fadeIn 0.3s ease-out'
      }}>
        <div style={{
          width: '100%',
          height: '200px',
          background: '#e2e8f0',
          borderRadius: '8px',
          marginBottom: '1rem'
        }}></div>
        <div style={{
          width: '70%',
          height: '24px',
          background: '#e2e8f0',
          borderRadius: '4px',
          marginBottom: '0.5rem'
        }}></div>
        <div style={{
          width: '50%',
          height: '20px',
          background: '#e2e8f0',
          borderRadius: '4px'
        }}></div>
      </div>
    );

    const Navbar = () => {
      const { darkMode, toggleDarkMode } = React.useContext(ThemeContext);
      const { language, toggleLanguage, t } = React.useContext(LanguageContext);
      const { user, logout } = React.useContext(AuthContext);
      const [menuOpen, setMenuOpen] = React.useState(false);
      const [activePage, setActivePage] = React.useState('home');

      React.useEffect(() => {
        const handleResize = () => {
          if (window.innerWidth > 768) {
            setMenuOpen(false);
          }
        };

        window.addEventListener('resize', handleResize);
        return () => window.removeEventListener('resize', handleResize);
      }, []);

      return (
        <nav style={{
          background: darkMode ? '#1e293b' : 'white',
          color: darkMode ? 'white' : '#1e293b',
          padding: '1rem',
          position: 'sticky',
          top: 0,
          zIndex: 100,
          boxShadow: '0 2px 10px rgba(0,0,0,0.1)',
          borderBottom: darkMode ? '1px solid #334155' : '1px solid #e2e8f0',
          width: '100%',
          maxWidth: '100vw'
        }}>
          <div style={{
            maxWidth: '1200px',
            margin: '0 auto',
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            width: '100%'
          }}>
            {/* Logo */}
            <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
              <div style={{
                width: '40px',
                height: '40px',
                background: '#0d9488',
                borderRadius: '8px',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                color: 'white',
                fontWeight: 'bold',
                fontSize: '1.2rem'
              }}>
                HL
              </div>
              <h1 style={{ margin: 0, fontSize: '1.5rem', fontWeight: 'bold', whiteSpace: 'nowrap' }}>
                {t.appName}
              </h1>
            </div>

            {/* Desktop Menu */}
            <div className="mobile-hidden" style={{ 
              display: 'flex', 
              gap: '20px', 
              alignItems: 'center'
            }}>
              <a href="#home" onClick={() => {setActivePage('home'); setMenuOpen(false);}} style={{ 
                color: activePage === 'home' ? '#0d9488' : (darkMode ? '#cbd5e1' : '#64748b'),
                textDecoration: 'none',
                fontWeight: activePage === 'home' ? '600' : '400',
                padding: '8px 12px',
                borderRadius: '6px',
                transition: 'all 0.2s'
              }}>
                {t.home}
              </a>
              <a href="#listings" onClick={() => {setActivePage('listings'); setMenuOpen(false);}} style={{ 
                color: activePage === 'listings' ? '#0d9488' : (darkMode ? '#cbd5e1' : '#64748b'),
                textDecoration: 'none',
                fontWeight: activePage === 'listings' ? '600' : '400',
                padding: '8px 12px',
                borderRadius: '6px',
                transition: 'all 0.2s'
              }}>
                {t.listings}
              </a>
              
              {user && user.role === 'broker' && (
                <>
                  <a href="#upload" onClick={() => {setActivePage('upload'); setMenuOpen(false);}} style={{ 
                    color: activePage === 'upload' ? '#0d9488' : (darkMode ? '#cbd5e1' : '#64748b'),
                    textDecoration: 'none',
                    fontWeight: activePage === 'upload' ? '600' : '400',
                    padding: '8px 12px',
                    borderRadius: '6px',
                    transition: 'all 0.2s'
                  }}>
                    {t.upload}
                  </a>
                  <a href="#dashboard" onClick={() => {setActivePage('dashboard'); setMenuOpen(false);}} style={{ 
                    color: activePage === 'dashboard' ? '#0d9488' : (darkMode ? '#cbd5e1' : '#64748b'),
                    textDecoration: 'none',
                    fontWeight: activePage === 'dashboard' ? '600' : '400',
                    padding: '8px 12px',
                    borderRadius: '6px',
                    transition: 'all 0.2s'
                  }}>
                    {t.dashboard}
                  </a>
                </>
              )}
              
              <a href="#favorites" onClick={() => {setActivePage('favorites'); setMenuOpen(false);}} style={{ 
                color: activePage === 'favorites' ? '#0d9488' : (darkMode ? '#cbd5e1' : '#64748b'),
                textDecoration: 'none',
                fontWeight: activePage === 'favorites' ? '600' : '400',
                padding: '8px 12px',
                borderRadius: '6px',
                transition: 'all 0.2s'
              }}>
                {t.favorites}
              </a>

              {/* User Section */}
              <div style={{ display: 'flex', alignItems: 'center', gap: '15px', marginLeft: '10px' }}>
                <button onClick={toggleDarkMode} style={{
                  background: 'none',
                  border: 'none',
                  fontSize: '1.2rem',
                  cursor: 'pointer',
                  color: darkMode ? '#cbd5e1' : '#64748b',
                  padding: '8px',
                  borderRadius: '6px',
                  transition: 'all 0.2s'
                }}>
                  {darkMode ? '‚òÄÔ∏è' : 'üåô'}
                </button>
                
                <button onClick={toggleLanguage} style={{
                  background: 'none',
                  border: 'none',
                  fontSize: '0.9rem',
                  cursor: 'pointer',
                  color: darkMode ? '#cbd5e1' : '#64748b',
                  fontWeight: 'bold',
                  padding: '8px 12px',
                  borderRadius: '6px',
                  border: darkMode ? '1px solid #475569' : '1px solid #cbd5e1',
                  transition: 'all 0.2s'
                }}>
                  {language === 'sw' ? 'EN' : 'SW'}
                </button>

                {user ? (
                  <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
                    <span style={{ 
                      color: darkMode ? '#cbd5e1' : '#64748b',
                      whiteSpace: 'nowrap'
                    }}>
                      {user.name}
                    </span>
                    <button onClick={logout} style={{
                      background: '#ef4444',
                      color: 'white',
                      border: 'none',
                      padding: '8px 16px',
                      borderRadius: '6px',
                      cursor: 'pointer',
                      fontSize: '0.9rem',
                      transition: 'all 0.2s'
                    }}>
                      {t.logout}
                    </button>
                  </div>
                ) : (
                  <>
                    <a href="#login" onClick={() => {setActivePage('login'); setMenuOpen(false);}} style={{
                      background: 'none',
                      color: darkMode ? '#cbd5e1' : '#64748b',
                      textDecoration: 'none',
                      padding: '8px 16px',
                      borderRadius: '6px',
                      border: darkMode ? '1px solid #475569' : '1px solid #cbd5e1',
                      fontSize: '0.9rem',
                      transition: 'all 0.2s'
                    }}>
                      {t.login}
                    </a>
                    <a href="#signup" onClick={() => {setActivePage('signup'); setMenuOpen(false);}} style={{
                      background: '#0d9488',
                      color: 'white',
                      textDecoration: 'none',
                      padding: '8px 16px',
                      borderRadius: '6px',
                      fontSize: '0.9rem',
                      transition: 'all 0.2s'
                    }}>
                      {t.signup}
                    </a>
                  </>
                )}
              </div>
            </div>

            {/* Mobile Menu Button */}
            <button onClick={() => setMenuOpen(!menuOpen)} style={{
              background: 'none',
              border: 'none',
              fontSize: '1.5rem',
              cursor: 'pointer',
              display: 'none',
              color: darkMode ? 'white' : '#1e293b',
              padding: '8px'
            }}
            className="mobile-menu-button"
            aria-label="Open menu"
            >
              {menuOpen ? '‚úï' : '‚ò∞'}
            </button>
          </div>

          {/* Mobile Menu */}
          {menuOpen && (
            <div style={{
              background: darkMode ? '#1e293b' : 'white',
              padding: '1rem',
              marginTop: '1rem',
              borderRadius: '8px',
              border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0',
              position: 'absolute',
              left: '1rem',
              right: '1rem',
              zIndex: 101
            }}>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                <a href="#home" onClick={() => { setActivePage('home'); setMenuOpen(false); }} style={{ 
                  color: activePage === 'home' ? '#0d9488' : (darkMode ? '#cbd5e1' : '#64748b'),
                  textDecoration: 'none',
                  padding: '12px',
                  borderRadius: '6px',
                  background: activePage === 'home' ? (darkMode ? '#0f172a' : '#f1f5f9') : 'transparent',
                  transition: 'all 0.2s'
                }}>
                  {t.home}
                </a>
                <a href="#listings" onClick={() => { setActivePage('listings'); setMenuOpen(false); }} style={{ 
                  color: activePage === 'listings' ? '#0d9488' : (darkMode ? '#cbd5e1' : '#64748b'),
                  textDecoration: 'none',
                  padding: '12px',
                  borderRadius: '6px',
                  background: activePage === 'listings' ? (darkMode ? '#0f172a' : '#f1f5f9') : 'transparent',
                  transition: 'all 0.2s'
                }}>
                  {t.listings}
                </a>
                
                {user && user.role === 'broker' && (
                  <>
                    <a href="#upload" onClick={() => { setActivePage('upload'); setMenuOpen(false); }} style={{ 
                      color: activePage === 'upload' ? '#0d9488' : (darkMode ? '#cbd5e1' : '#64748b'),
                      textDecoration: 'none',
                      padding: '12px',
                      borderRadius: '6px',
                      background: activePage === 'upload' ? (darkMode ? '#0f172a' : '#f1f5f9') : 'transparent',
                      transition: 'all 0.2s'
                    }}>
                      {t.upload}
                    </a>
                    <a href="#dashboard" onClick={() => { setActivePage('dashboard'); setMenuOpen(false); }} style={{ 
                      color: activePage === 'dashboard' ? '#0d9488' : (darkMode ? '#cbd5e1' : '#64748b'),
                      textDecoration: 'none',
                      padding: '12px',
                      borderRadius: '6px',
                      background: activePage === 'dashboard' ? (darkMode ? '#0f172a' : '#f1f5f9') : 'transparent',
                      transition: 'all 0.2s'
                    }}>
                      {t.dashboard}
                    </a>
                  </>
                )}
                
                <a href="#favorites" onClick={() => { setActivePage('favorites'); setMenuOpen(false); }} style={{ 
                  color: activePage === 'favorites' ? '#0d9488' : (darkMode ? '#cbd5e1' : '#64748b'),
                  textDecoration: 'none',
                  padding: '12px',
                  borderRadius: '6px',
                  background: activePage === 'favorites' ? (darkMode ? '#0f172a' : '#f1f5f9') : 'transparent',
                  transition: 'all 0.2s'
                }}>
                  {t.favorites}
                </a>
                
                {!user && (
                  <>
                    <a href="#login" onClick={() => { setActivePage('login'); setMenuOpen(false); }} style={{
                      color: darkMode ? '#cbd5e1' : '#64748b',
                      textDecoration: 'none',
                      padding: '12px',
                      borderRadius: '6px',
                      border: darkMode ? '1px solid #475569' : '1px solid #cbd5e1',
                      transition: 'all 0.2s'
                    }}>
                      {t.login}
                    </a>
                    <a href="#signup" onClick={() => { setActivePage('signup'); setMenuOpen(false); }} style={{
                      color: 'white',
                      textDecoration: 'none',
                      padding: '12px',
                      borderRadius: '6px',
                      background: '#0d9488',
                      transition: 'all 0.2s'
                    }}>
                      {t.signup}
                    </a>
                  </>
                )}
              </div>
            </div>
          )}
        </nav>
      );
    };

    const LoginPage = () => {
      const { darkMode } = React.useContext(ThemeContext);
      const { t } = React.useContext(LanguageContext);
      const { login } = React.useContext(AuthContext);
      const [formData, setFormData] = React.useState({
        email: '',
        password: ''
      });
      const [errors, setErrors] = React.useState({});
      const [loading, setLoading] = React.useState(false);

      const handleSubmit = async (e) => {
        e.preventDefault();
        setErrors({});
        
        // Validation
        const newErrors = {};
        if (!formData.email) newErrors.email = 'Email is required';
        else if (!validateEmail(formData.email)) newErrors.email = 'Invalid email format';
        if (!formData.password) newErrors.password = 'Password is required';
        else if (formData.password.length < 6) newErrors.password = 'Password must be at least 6 characters';
        
        if (Object.keys(newErrors).length > 0) {
          setErrors(newErrors);
          return;
        }
        
        setLoading(true);
        
        // Simulate API call
        setTimeout(() => {
          login({
            id: Date.now(),
            email: formData.email,
            name: formData.email.split('@')[0],
            role: 'buyer'
          });
          setLoading(false);
          window.location.hash = '#home';
        }, 1000);
      };

      return (
        <div style={{
          maxWidth: '400px',
          margin: '3rem auto',
          padding: '2rem',
          background: darkMode ? '#1e293b' : 'white',
          borderRadius: '12px',
          boxShadow: '0 4px 15px rgba(0,0,0,0.1)',
          border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0',
          width: '90%'
        }}>
          <h2 style={{ 
            textAlign: 'center', 
            marginBottom: '2rem',
            color: darkMode ? 'white' : '#1e293b'
          }}>
            {t.login}
          </h2>
          <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
            <div>
              <label style={{ 
                display: 'block', 
                marginBottom: '5px', 
                fontWeight: '500',
                color: darkMode ? '#cbd5e1' : '#64748b'
              }}>
                {t.email}
              </label>
              <input
                type="email"
                value={formData.email}
                onChange={(e) => {
                  setFormData({...formData, email: e.target.value});
                  setErrors({...errors, email: ''});
                }}
                required
                style={{
                  width: '100%',
                  padding: '12px',
                  border: errors.email ? '1px solid #ef4444' : `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                  borderRadius: '6px',
                  fontSize: '1rem',
                  background: darkMode ? '#0f172a' : 'white',
                  color: darkMode ? 'white' : '#1e293b'
                }}
                placeholder="example@email.com"
              />
              {errors.email && (
                <span style={{ color: '#ef4444', fontSize: '0.875rem', marginTop: '4px', display: 'block' }}>
                  {errors.email}
                </span>
              )}
            </div>
            
            <div>
              <label style={{ 
                display: 'block', 
                marginBottom: '5px', 
                fontWeight: '500',
                color: darkMode ? '#cbd5e1' : '#64748b'
              }}>
                {t.password}
              </label>
              <input
                type="password"
                value={formData.password}
                onChange={(e) => {
                  setFormData({...formData, password: e.target.value});
                  setErrors({...errors, password: ''});
                }}
                required
                style={{
                  width: '100%',
                  padding: '12px',
                  border: errors.password ? '1px solid #ef4444' : `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                  borderRadius: '6px',
                  fontSize: '1rem',
                  background: darkMode ? '#0f172a' : 'white',
                  color: darkMode ? 'white' : '#1e293b'
                }}
                placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
              />
              {errors.password && (
                <span style={{ color: '#ef4444', fontSize: '0.875rem', marginTop: '4px', display: 'block' }}>
                  {errors.password}
                </span>
              )}
            </div>
            
            <button 
              type="submit" 
              disabled={loading}
              style={{
                background: loading ? '#94a3b8' : '#0d9488',
                color: 'white',
                border: 'none',
                padding: '12px',
                borderRadius: '6px',
                fontSize: '1rem',
                fontWeight: 'bold',
                cursor: loading ? 'not-allowed' : 'pointer',
                marginTop: '1rem',
                transition: 'all 0.2s'
              }}
            >
              {loading ? `${t.loading}...` : t.login}
            </button>
          </form>
          
          <p style={{ 
            textAlign: 'center', 
            marginTop: '1.5rem',
            color: darkMode ? '#cbd5e1' : '#64748b'
          }}>
            {t.dontHaveAccount} 
            <a href="#signup" style={{
              color: '#0d9488',
              textDecoration: 'none',
              marginLeft: '5px',
              fontWeight: '500'
            }}>
              {t.signup}
            </a>
          </p>
        </div>
      );
    };

    const SignupPage = () => {
      const { darkMode } = React.useContext(ThemeContext);
      const { t } = React.useContext(LanguageContext);
      const { signup } = React.useContext(AuthContext);
      const [formData, setFormData] = React.useState({
        name: '',
        email: '',
        phone: '',
        password: '',
        confirmPassword: '',
        role: 'buyer'
      });
      const [errors, setErrors] = React.useState({});
      const [loading, setLoading] = React.useState(false);

      const handleSubmit = (e) => {
        e.preventDefault();
        setErrors({});
        
        // Validation
        const newErrors = {};
        if (!formData.name) newErrors.name = 'Name is required';
        if (!formData.email) newErrors.email = 'Email is required';
        else if (!validateEmail(formData.email)) newErrors.email = 'Invalid email format';
        if (!formData.phone) newErrors.phone = 'Phone is required';
        else if (!validatePhone(formData.phone)) newErrors.phone = 'Invalid phone number';
        if (!formData.password) newErrors.password = 'Password is required';
        else if (formData.password.length < 6) newErrors.password = 'Password must be at least 6 characters';
        if (!formData.confirmPassword) newErrors.confirmPassword = 'Please confirm password';
        else if (formData.password !== formData.confirmPassword) newErrors.confirmPassword = t.passwordsDontMatch;
        
        if (Object.keys(newErrors).length > 0) {
          setErrors(newErrors);
          return;
        }
        
        setLoading(true);
        
        // Simulate API call
        setTimeout(() => {
          signup({
            id: Date.now(),
            name: formData.name,
            email: formData.email,
            phone: formData.phone,
            role: formData.role
          });
          setLoading(false);
          window.location.hash = '#home';
        }, 1000);
      };

      return (
        <div style={{
          maxWidth: '400px',
          margin: '3rem auto',
          padding: '2rem',
          background: darkMode ? '#1e293b' : 'white',
          borderRadius: '12px',
          boxShadow: '0 4px 15px rgba(0,0,0,0.1)',
          border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0',
          width: '90%'
        }}>
          <h2 style={{ 
            textAlign: 'center', 
            marginBottom: '2rem',
            color: darkMode ? 'white' : '#1e293b'
          }}>
            {t.signup}
          </h2>
          <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
            <div>
              <label style={{ 
                display: 'block', 
                marginBottom: '5px', 
                fontWeight: '500',
                color: darkMode ? '#cbd5e1' : '#64748b'
              }}>
                {t.name}
              </label>
              <input
                type="text"
                value={formData.name}
                onChange={(e) => {
                  setFormData({...formData, name: e.target.value});
                  setErrors({...errors, name: ''});
                }}
                required
                style={{
                  width: '100%',
                  padding: '12px',
                  border: errors.name ? '1px solid #ef4444' : `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                  borderRadius: '6px',
                  fontSize: '1rem',
                  background: darkMode ? '#0f172a' : 'white',
                  color: darkMode ? 'white' : '#1e293b'
                }}
              />
              {errors.name && (
                <span style={{ color: '#ef4444', fontSize: '0.875rem', marginTop: '4px', display: 'block' }}>
                  {errors.name}
                </span>
              )}
            </div>
            
            <div>
              <label style={{ 
                display: 'block', 
                marginBottom: '5px', 
                fontWeight: '500',
                color: darkMode ? '#cbd5e1' : '#64748b'
              }}>
                {t.email}
              </label>
              <input
                type="email"
                value={formData.email}
                onChange={(e) => {
                  setFormData({...formData, email: e.target.value});
                  setErrors({...errors, email: ''});
                }}
                required
                style={{
                  width: '100%',
                  padding: '12px',
                  border: errors.email ? '1px solid #ef4444' : `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                  borderRadius: '6px',
                  fontSize: '1rem',
                  background: darkMode ? '#0f172a' : 'white',
                  color: darkMode ? 'white' : '#1e293b'
                }}
              />
              {errors.email && (
                <span style={{ color: '#ef4444', fontSize: '0.875rem', marginTop: '4px', display: 'block' }}>
                  {errors.email}
                </span>
              )}
            </div>
            
            <div>
              <label style={{ 
                display: 'block', 
                marginBottom: '5px', 
                fontWeight: '500',
                color: darkMode ? '#cbd5e1' : '#64748b'
              }}>
                {t.phone}
              </label>
              <input
                type="tel"
                value={formData.phone}
                onChange={(e) => {
                  setFormData({...formData, phone: e.target.value});
                  setErrors({...errors, phone: ''});
                }}
                required
                style={{
                  width: '100%',
                  padding: '12px',
                  border: errors.phone ? '1px solid #ef4444' : `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                  borderRadius: '6px',
                  fontSize: '1rem',
                  background: darkMode ? '#0f172a' : 'white',
                  color: darkMode ? 'white' : '#1e293b'
                }}
                placeholder="+255 712 345 678"
              />
              {errors.phone && (
                <span style={{ color: '#ef4444', fontSize: '0.875rem', marginTop: '4px', display: 'block' }}>
                  {errors.phone}
                </span>
              )}
            </div>
            
            <div>
              <label style={{ 
                display: 'block', 
                marginBottom: '5px', 
                fontWeight: '500',
                color: darkMode ? '#cbd5e1' : '#64748b'
              }}>
                {t.role}
              </label>
              <select
                value={formData.role}
                onChange={(e) => setFormData({...formData, role: e.target.value})}
                required
                style={{
                  width: '100%',
                  padding: '12px',
                  border: `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                  borderRadius: '6px',
                  fontSize: '1rem',
                  background: darkMode ? '#0f172a' : 'white',
                  color: darkMode ? 'white' : '#1e293b'
                }}
              >
                <option value="buyer">{t.buyer}</option>
                <option value="broker">{t.broker}</option>
              </select>
            </div>
            
            <div>
              <label style={{ 
                display: 'block', 
                marginBottom: '5px', 
                fontWeight: '500',
                color: darkMode ? '#cbd5e1' : '#64748b'
              }}>
                {t.password}
              </label>
              <input
                type="password"
                value={formData.password}
                onChange={(e) => {
                  setFormData({...formData, password: e.target.value});
                  setErrors({...errors, password: ''});
                }}
                required
                style={{
                  width: '100%',
                  padding: '12px',
                  border: errors.password ? '1px solid #ef4444' : `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                  borderRadius: '6px',
                  fontSize: '1rem',
                  background: darkMode ? '#0f172a' : 'white',
                  color: darkMode ? 'white' : '#1e293b'
                }}
              />
              {errors.password && (
                <span style={{ color: '#ef4444', fontSize: '0.875rem', marginTop: '4px', display: 'block' }}>
                  {errors.password}
                </span>
              )}
            </div>
            
            <div>
              <label style={{ 
                display: 'block', 
                marginBottom: '5px', 
                fontWeight: '500',
                color: darkMode ? '#cbd5e1' : '#64748b'
              }}>
                {t.confirmPassword}
              </label>
              <input
                type="password"
                value={formData.confirmPassword}
                onChange={(e) => {
                  setFormData({...formData, confirmPassword: e.target.value});
                  setErrors({...errors, confirmPassword: ''});
                }}
                required
                style={{
                  width: '100%',
                  padding: '12px',
                  border: errors.confirmPassword ? '1px solid #ef4444' : `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                  borderRadius: '6px',
                  fontSize: '1rem',
                  background: darkMode ? '#0f172a' : 'white',
                  color: darkMode ? 'white' : '#1e293b'
                }}
              />
              {errors.confirmPassword && (
                <span style={{ color: '#ef4444', fontSize: '0.875rem', marginTop: '4px', display: 'block' }}>
                  {errors.confirmPassword}
                </span>
              )}
            </div>
            
            <button 
              type="submit" 
              disabled={loading}
              style={{
                background: loading ? '#94a3b8' : '#0d9488',
                color: 'white',
                border: 'none',
                padding: '12px',
                borderRadius: '6px',
                fontSize: '1rem',
                fontWeight: 'bold',
                cursor: loading ? 'not-allowed' : 'pointer',
                marginTop: '1rem',
                transition: 'all 0.2s'
              }}
            >
              {loading ? `${t.loading}...` : t.signup}
            </button>
          </form>
          
          <p style={{ 
            textAlign: 'center', 
            marginTop: '1.5rem',
            color: darkMode ? '#cbd5e1' : '#64748b'
          }}>
            Already have an account? 
            <a href="#login" style={{
              color: '#0d9488',
              textDecoration: 'none',
              marginLeft: '5px',
              fontWeight: '500'
            }}>
              {t.login}
            </a>
          </p>
        </div>
      );
    };

    const PropertyCard = React.memo(({ property, onViewDetails }) => {
      const { darkMode } = React.useContext(ThemeContext);
      const { t } = React.useContext(LanguageContext);
      const { user, favorites, toggleFavorite } = React.useContext(AuthContext);
      const isFavorite = favorites.includes(property.id);

      const handleFavoriteClick = (e) => {
        e.stopPropagation();
        if (!user) {
          alert('Please login to save favorites');
          return;
        }
        toggleFavorite(property.id);
      };

      return (
        <div 
          onClick={() => onViewDetails(property)}
          style={{
            background: darkMode ? '#1e293b' : 'white',
            borderRadius: '12px',
            overflow: 'hidden',
            boxShadow: '0 4px 15px rgba(0,0,0,0.1)',
            transition: 'all 0.3s ease',
            cursor: 'pointer',
            border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0',
            height: '100%',
            display: 'flex',
            flexDirection: 'column'
          }}
          onMouseEnter={(e) => {
            e.currentTarget.style.transform = 'translateY(-5px)';
            e.currentTarget.style.boxShadow = '0 8px 25px rgba(0,0,0,0.15)';
          }}
          onMouseLeave={(e) => {
            e.currentTarget.style.transform = 'translateY(0)';
            e.currentTarget.style.boxShadow = '0 4px 15px rgba(0,0,0,0.1)';
          }}
        >
          <div style={{ position: 'relative', flexShrink: 0 }}>
            <img 
              src={property.images?.[0] || 'https://images.unsplash.com/photo-1560184897-ae75f418493e?w=800&h=600&fit=crop'} 
              alt={property.title}
              style={{
                width: '100%',
                height: '200px',
                objectFit: 'cover',
                display: 'block'
              }}
              loading="lazy"
            />
            <button 
              onClick={handleFavoriteClick}
              style={{
                position: 'absolute',
                top: '10px',
                right: '10px',
                background: 'white',
                border: 'none',
                borderRadius: '50%',
                width: '40px',
                height: '40px',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                fontSize: '1.2rem',
                cursor: 'pointer',
                boxShadow: '0 2px 8px rgba(0,0,0,0.2)',
                transition: 'all 0.2s'
              }}
              aria-label={isFavorite ? 'Remove from favorites' : 'Add to favorites'}
            >
              {isFavorite ? '‚ù§Ô∏è' : 'ü§ç'}
            </button>
            
            {property.featured && (
              <div style={{
                position: 'absolute',
                top: '10px',
                left: '10px',
                background: '#3b82f6',
                color: 'white',
                padding: '4px 12px',
                borderRadius: '20px',
                fontSize: '0.8rem',
                fontWeight: 'bold'
              }}>
                Featured
              </div>
            )}
          </div>
          
          <div style={{ padding: '1rem', flexGrow: 1, display: 'flex', flexDirection: 'column' }}>
            <h3 style={{ 
              margin: '0 0 8px 0', 
              fontSize: '1.2rem',
              color: darkMode ? 'white' : '#1e293b',
              lineHeight: '1.4'
            }}>
              {property.title}
            </h3>
            
            <div style={{ 
              display: 'flex', 
              alignItems: 'center',
              color: darkMode ? '#cbd5e1' : '#64748b',
              marginBottom: '8px',
              fontSize: '0.9rem'
            }}>
              <span>üìç</span>
              <span style={{ marginLeft: '4px' }}>{property.location}</span>
            </div>
            
            <p style={{
              color: darkMode ? '#94a3b8' : '#64748b',
              fontSize: '0.9rem',
              marginBottom: '1rem',
              flexGrow: 1
            }}>
              {property.description?.substring(0, 80)}...
            </p>
            
            <div style={{ 
              display: 'flex', 
              justifyContent: 'space-between',
              alignItems: 'center',
              marginTop: 'auto'
            }}>
              <span style={{
                fontSize: '1.3rem',
                fontWeight: 'bold',
                color: '#0d9488'
              }}>
                {formatPrice(property.price)}
                <span style={{ fontSize: '0.9rem', color: darkMode ? '#cbd5e1' : '#64748b' }}>
                  /month
                </span>
              </span>
              
              <div style={{ display: 'flex', gap: '8px' }}>
                <span style={{
                  background: darkMode ? '#334155' : '#f0f9ff',
                  color: darkMode ? '#cbd5e1' : '#0369a1',
                  padding: '4px 8px',
                  borderRadius: '4px',
                  fontSize: '0.8rem'
                }}>
                  üõèÔ∏è {property.bedrooms || 'Studio'}
                </span>
                <span style={{
                  background: darkMode ? '#334155' : '#f0f9ff',
                  color: darkMode ? '#cbd5e1' : '#0369a1',
                  padding: '4px 8px',
                  borderRadius: '4px',
                  fontSize: '0.8rem'
                }}>
                  üöø {property.bathrooms || '1'}
                </span>
              </div>
            </div>
          </div>
        </div>
      );
    });

    const PropertyDetail = ({ property, onClose }) => {
      const { darkMode } = React.useContext(ThemeContext);
      const { t } = React.useContext(LanguageContext);
      const { user, sendMessage } = React.useContext(AuthContext);
      const [activeTab, setActiveTab] = React.useState('details');
      const [message, setMessage] = React.useState('');
      const [showMessageForm, setShowMessageForm] = React.useState(false);
      const [toast, setToast] = React.useState(null);

      React.useEffect(() => {
        const handleEscape = (e) => {
          if (e.key === 'Escape') onClose();
        };
        document.addEventListener('keydown', handleEscape);
        return () => document.removeEventListener('keydown', handleEscape);
      }, [onClose]);

      const handleSendMessage = (e) => {
        e.preventDefault();
        if (!user) {
          setToast({ message: 'You must be logged in to send messages', type: 'error' });
          return;
        }
        
        if (!message.trim()) {
          setToast({ message: 'Please enter a message', type: 'error' });
          return;
        }
        
        sendMessage({
          propertyId: property.id,
          propertyTitle: property.title,
          from: user.name,
          fromEmail: user.email,
          to: property.brokerName || 'Broker',
          message: message.trim(),
        });
        
        setToast({ message: 'Message sent successfully!', type: 'success' });
        setMessage('');
        setShowMessageForm(false);
      };

      return (
        <div 
          onClick={onClose}
          style={{
            position: 'fixed',
            top: 0,
            left: 0,
            right: 0,
            bottom: 0,
            background: 'rgba(0,0,0,0.8)',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            zIndex: 1000,
            padding: '1rem',
            overflow: 'auto'
          }}
        >
          <div 
            onClick={(e) => e.stopPropagation()}
            style={{
              background: darkMode ? '#1e293b' : 'white',
              borderRadius: '12px',
              maxWidth: '900px',
              width: '100%',
              maxHeight: '90vh',
              overflow: 'hidden',
              position: 'relative',
              animation: 'fadeIn 0.3s ease-out'
            }}
          >
            {/* Close button */}
            <button 
              onClick={onClose}
              style={{
                position: 'absolute',
                top: '15px',
                right: '15px',
                background: 'rgba(0,0,0,0.5)',
                color: 'white',
                border: 'none',
                borderRadius: '50%',
                width: '40px',
                height: '40px',
                fontSize: '1.2rem',
                cursor: 'pointer',
                zIndex: 1001,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center'
              }}
              aria-label="Close"
            >
              √ó
            </button>
            
            {/* Property Images */}
            <div style={{ position: 'relative' }}>
              <img 
                src={property.images?.[0] || 'https://images.unsplash.com/photo-1560184897-ae75f418493e?w=800&h=600&fit=crop'} 
                alt={property.title}
                style={{
                  width: '100%',
                  height: '300px',
                  objectFit: 'cover',
                  display: 'block'
                }}
              />
            </div>
            
            {/* Property Info */}
            <div style={{ padding: '2rem', overflow: 'auto', maxHeight: 'calc(90vh - 300px)' }}>
              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '1.5rem', flexWrap: 'wrap', gap: '1rem' }}>
                <div style={{ flex: 1, minWidth: '250px' }}>
                  <h2 style={{ 
                    margin: '0 0 10px 0',
                    color: darkMode ? 'white' : '#1e293b',
                    fontSize: '1.8rem',
                    lineHeight: '1.3'
                  }}>
                    {property.title}
                  </h2>
                  <div style={{ 
                    display: 'flex', 
                    alignItems: 'center',
                    color: darkMode ? '#cbd5e1' : '#64748b',
                    fontSize: '1rem',
                    flexWrap: 'wrap',
                    gap: '15px'
                  }}>
                    <span>üìç {property.location}</span>
                    <span>üõèÔ∏è {property.bedrooms || 'Studio'}</span>
                    <span>üöø {property.bathrooms || '1'}</span>
                  </div>
                </div>
                
                <div style={{ textAlign: 'right' }}>
                  <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#0d9488' }}>
                    {formatPrice(property.price)}
                  </div>
                  <div style={{ color: darkMode ? '#cbd5e1' : '#64748b', fontSize: '0.9rem' }}>
                    /month
                  </div>
                </div>
              </div>
              
              {/* Tabs */}
              <div style={{ 
                display: 'flex', 
                borderBottom: `1px solid ${darkMode ? '#334155' : '#e2e8f0'}`,
                marginBottom: '1.5rem',
                overflowX: 'auto'
              }}>
                <button onClick={() => setActiveTab('details')} style={{
                  background: 'none',
                  border: 'none',
                  padding: '10px 20px',
                  color: activeTab === 'details' ? '#0d9488' : (darkMode ? '#cbd5e1' : '#64748b'),
                  borderBottom: activeTab === 'details' ? '2px solid #0d9488' : 'none',
                  cursor: 'pointer',
                  fontSize: '1rem',
                  whiteSpace: 'nowrap'
                }}>
                  {t.description}
                </button>
                <button onClick={() => setActiveTab('amenities')} style={{
                  background: 'none',
                  border: 'none',
                  padding: '10px 20px',
                  color: activeTab === 'amenities' ? '#0d9488' : (darkMode ? '#cbd5e1' : '#64748b'),
                  borderBottom: activeTab === 'amenities' ? '2px solid #0d9488' : 'none',
                  cursor: 'pointer',
                  fontSize: '1rem',
                  whiteSpace: 'nowrap'
                }}>
                  {t.amenities}
                </button>
              </div>
              
              {/* Tab Content */}
              <div>
                {activeTab === 'details' && (
                  <div>
                    <p style={{ 
                      color: darkMode ? '#cbd5e1' : '#64748b',
                      lineHeight: '1.6',
                      marginBottom: '1.5rem'
                    }}>
                      {property.description || 'No description provided.'}
                    </p>
                    
                    <div style={{ 
                      background: darkMode ? '#0f172a' : '#f8fafc',
                      padding: '1rem',
                      borderRadius: '8px',
                      marginBottom: '1.5rem'
                    }}>
                      <h4 style={{ margin: '0 0 10px 0', color: darkMode ? 'white' : '#1e293b' }}>
                        Broker Information
                      </h4>
                      <div style={{ color: darkMode ? '#cbd5e1' : '#64748b' }}>
                        <p style={{ marginBottom: '8px' }}><strong>Name:</strong> {property.brokerName || 'John Doe'}</p>
                        <p style={{ marginBottom: '8px' }}><strong>Email:</strong> {property.brokerEmail || 'john@example.com'}</p>
                        <p><strong>Phone:</strong> {property.brokerPhone || '+255 712 345 678'}</p>
                      </div>
                    </div>
                  </div>
                )}
                
                {activeTab === 'amenities' && (
                  <div style={{ display: 'flex', flexWrap: 'wrap', gap: '10px' }}>
                    {CONFIG.AMENITIES.map(amenity => (
                      <div key={amenity.id} style={{
                        display: 'flex',
                        alignItems: 'center',
                        gap: '8px',
                        background: darkMode ? '#0f172a' : '#f8fafc',
                        padding: '10px 15px',
                        borderRadius: '8px',
                        minWidth: '150px',
                        flex: '1 0 auto'
                      }}>
                        <span style={{ fontSize: '1.2rem' }}>{amenity.icon}</span>
                        <span style={{ color: darkMode ? '#cbd5e1' : '#64748b' }}>
                          {amenity.label}
                        </span>
                      </div>
                    ))}
                  </div>
                )}
              </div>
              
              {/* Action Buttons */}
              <div style={{ 
                display: 'flex', 
                gap: '1rem', 
                marginTop: '2rem',
                paddingTop: '1.5rem',
                borderTop: `1px solid ${darkMode ? '#334155' : '#e2e8f0'}`,
                flexWrap: 'wrap'
              }}>
                <button onClick={() => setShowMessageForm(true)} style={{
                  flex: 1,
                  minWidth: '200px',
                  background: '#0d9488',
                  color: 'white',
                  border: 'none',
                  padding: '12px',
                  borderRadius: '6px',
                  fontSize: '1rem',
                  fontWeight: 'bold',
                  cursor: 'pointer',
                  transition: 'all 0.2s'
                }}>
                  {t.sendMessage}
                </button>
                
                <a 
                  href={`tel:${property.brokerPhone || '+255712345678'}`}
                  style={{
                    flex: 1,
                    minWidth: '200px',
                    background: '#3b82f6',
                    color: 'white',
                    border: 'none',
                    padding: '12px',
                    borderRadius: '6px',
                    fontSize: '1rem',
                    fontWeight: 'bold',
                    cursor: 'pointer',
                    textDecoration: 'none',
                    textAlign: 'center',
                    transition: 'all 0.2s'
                  }}
                >
                  üìû {t.contact}
                </a>
              </div>
            </div>
          </div>
          
          {/* Message Form Modal */}
          {showMessageForm && (
            <div style={{
              position: 'fixed',
              top: 0,
              left: 0,
              right: 0,
              bottom: 0,
              background: 'rgba(0,0,0,0.7)',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              zIndex: 1002,
              padding: '1rem'
            }}>
              <div style={{
                background: darkMode ? '#1e293b' : 'white',
                borderRadius: '12px',
                padding: '2rem',
                maxWidth: '500px',
                width: '100%',
                maxHeight: '90vh',
                overflow: 'auto'
              }}>
                <h3 style={{ 
                  margin: '0 0 1rem 0', 
                  color: darkMode ? 'white' : '#1e293b',
                  fontSize: '1.5rem'
                }}>
                  {t.sendMessage}
                </h3>
                
                <form onSubmit={handleSendMessage}>
                  <textarea
                    value={message}
                    onChange={(e) => setMessage(e.target.value)}
                    placeholder={t.yourMessage}
                    rows="4"
                    required
                    style={{
                      width: '100%',
                      padding: '12px',
                      border: `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                      borderRadius: '6px',
                      fontSize: '1rem',
                      marginBottom: '1rem',
                      background: darkMode ? '#0f172a' : 'white',
                      color: darkMode ? 'white' : '#1e293b',
                      resize: 'vertical'
                    }}
                  />
                  
                  <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>
                    <button type="submit" style={{
                      flex: 1,
                      minWidth: '120px',
                      background: '#0d9488',
                      color: 'white',
                      border: 'none',
                      padding: '12px',
                      borderRadius: '6px',
                      fontSize: '1rem',
                      fontWeight: 'bold',
                      cursor: 'pointer',
                      transition: 'all 0.2s'
                    }}>
                      {t.send}
                    </button>
                    
                    <button type="button" onClick={() => setShowMessageForm(false)} style={{
                      flex: 1,
                      minWidth: '120px',
                      background: darkMode ? '#475569' : '#e2e8f0',
                      color: darkMode ? 'white' : '#1e293b',
                      border: 'none',
                      padding: '12px',
                      borderRadius: '6px',
                      fontSize: '1rem',
                      fontWeight: 'bold',
                      cursor: 'pointer',
                      transition: 'all 0.2s'
                    }}>
                      {t.cancel}
                    </button>
                  </div>
                </form>
              </div>
            </div>
          )}
          
          {/* Toast */}
          {toast && (
            <Toast 
              message={toast.message} 
              type={toast.type} 
              onClose={() => setToast(null)} 
            />
          )}
        </div>
      );
    };

    const ListingsPage = () => {
      const { darkMode } = React.useContext(ThemeContext);
      const { t } = React.useContext(LanguageContext);
      const [properties, setProperties] = React.useState([]);
      const [filteredProperties, setFilteredProperties] = React.useState([]);
      const [filters, setFilters] = React.useState({
        location: '',
        type: '',
        minPrice: '',
        maxPrice: ''
      });
      const [selectedProperty, setSelectedProperty] = React.useState(null);
      const [loading, setLoading] = React.useState(true);

      React.useEffect(() => {
        // Load properties
        const storedProperties = Storage.get('properties');
        if (!storedProperties || storedProperties.length === 0) {
          const sampleProperties = [
            {
              id: 1,
              title: "Bedsitter Sinza Karibu na Chuo",
              location: "Sinza",
              price: 135000,
              type: "Bedsitter",
              bedrooms: "Studio",
              bathrooms: "1",
              description: "Bedsitter nzuri Sinza, maji 24/7, karibu na chuo kikuu, umeme wa kudumu, usalama mzuri. Inafaa kwa mwanafunzi au mtu binafsi.",
              featured: true,
              brokerId: 1,
              brokerName: "James Anderson",
              brokerEmail: "james@houselink.co.tz",
              brokerPhone: "+255712345678",
              amenities: ["water", "security", "wifi"]
            },
            {
              id: 2,
              title: "Chumba Mbezi Beach",
              location: "Mbezi",
              price: 98000,
              type: "Single Room",
              bedrooms: "1",
              bathrooms: "1",
              description: "Chumba kizuri Mbezi Beach, tiles zote, dirisha zuri, jiko la kisasa, bafu binafsi. Eneo tulia na usalama mzuri.",
              featured: true,
              brokerId: 2,
              brokerName: "Sarah Johnson",
              brokerEmail: "sarah@houselink.co.tz",
              brokerPhone: "+255765432109",
              amenities: ["water", "security", "parking"]
            },
            {
              id: 3,
              title: "Apartment Masaki",
              location: "Masaki",
              price: 950000,
              type: "Apartment",
              bedrooms: "2",
              bathrooms: "2",
              description: "Apartment ya kisasa Masaki, mtazamo wa bahari, gym, bwawa, ukumbi wa mikutano. Inafaa kwa familia au wafanyabiashara.",
              featured: false,
              brokerId: 3,
              brokerName: "Michael Chen",
              brokerEmail: "michael@houselink.co.tz",
              brokerPhone: "+255788888888",
              amenities: ["water", "security", "parking", "wifi", "furnished"]
            }
          ];
          setProperties(sampleProperties);
          setFilteredProperties(sampleProperties);
          Storage.set('properties', sampleProperties);
        } else {
          setProperties(storedProperties);
          setFilteredProperties(storedProperties);
        }
        setLoading(false);
      }, []);

      React.useEffect(() => {
        let filtered = [...properties];
        
        if (filters.location) {
          filtered = filtered.filter(p => p.location === filters.location);
        }
        
        if (filters.type) {
          filtered = filtered.filter(p => p.type === filters.type);
        }
        
        if (filters.minPrice) {
          filtered = filtered.filter(p => p.price >= parseInt(filters.minPrice));
        }
        
        if (filters.maxPrice) {
          filtered = filtered.filter(p => p.price <= parseInt(filters.maxPrice));
        }
        
        setFilteredProperties(filtered);
      }, [filters, properties]);

      const handleFilterChange = (key, value) => {
        setFilters(prev => ({ ...prev, [key]: value }));
      };

      const resetFilters = () => {
        setFilters({
          location: '',
          type: '',
          minPrice: '',
          maxPrice: ''
        });
      };

      return (
        <section id="listings" style={{ 
          padding: '2rem 1rem', 
          minHeight: '80vh',
          background: darkMode ? '#0f172a' : '#f8fafc',
          width: '100%',
          maxWidth: '100vw',
          overflow: 'hidden'
        }}>
          <div style={{ 
            maxWidth: '1200px', 
            margin: '0 auto',
            width: '100%'
          }}>
            <div style={{ 
              display: 'flex', 
              justifyContent: 'space-between', 
              alignItems: 'center',
              marginBottom: '2rem',
              flexWrap: 'wrap',
              gap: '1rem'
            }}>
              <h2 style={{ 
                fontSize: '2rem', 
                color: darkMode ? 'white' : '#1e293b',
                margin: 0
              }}>
                {t.listings}
              </h2>
              
              <button 
                onClick={resetFilters}
                style={{
                  background: darkMode ? '#475569' : '#e2e8f0',
                  color: darkMode ? 'white' : '#1e293b',
                  border: 'none',
                  padding: '8px 16px',
                  borderRadius: '6px',
                  cursor: 'pointer',
                  fontSize: '0.9rem',
                  transition: 'all 0.2s'
                }}
              >
                Reset Filters
              </button>
            </div>
            
            {/* Filters */}
            <div style={{
              background: darkMode ? '#1e293b' : 'white',
              padding: '1.5rem',
              borderRadius: '12px',
              boxShadow: '0 4px 15px rgba(0,0,0,0.1)',
              marginBottom: '2rem',
              border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0'
            }}>
              <h3 style={{ 
                margin: '0 0 1rem 0', 
                color: darkMode ? 'white' : '#1e293b',
                fontSize: '1.2rem'
              }}>
                {t.filter}
              </h3>
              
              <div style={{
                display: 'grid',
                gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',
                gap: '1rem'
              }}>
                <div>
                  <label style={{ 
                    display: 'block', 
                    marginBottom: '4px', 
                    color: darkMode ? '#cbd5e1' : '#64748b',
                    fontSize: '0.9rem'
                  }}>
                    {t.location}
                  </label>
                  <select 
                    value={filters.location}
                    onChange={(e) => handleFilterChange('location', e.target.value)}
                    style={{
                      width: '100%',
                      padding: '10px',
                      border: `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                      borderRadius: '8px',
                      fontSize: '1rem',
                      background: darkMode ? '#0f172a' : 'white',
                      color: darkMode ? 'white' : '#1e293b'
                    }}>
                    <option value="">{t.allLocations}</option>
                    {CONFIG.LOCATIONS.map(location => (
                      <option key={location} value={location}>{location}</option>
                    ))}
                  </select>
                </div>
                
                <div>
                  <label style={{ 
                    display: 'block', 
                    marginBottom: '4px', 
                    color: darkMode ? '#cbd5e1' : '#64748b',
                    fontSize: '0.9rem'
                  }}>
                    {t.type}
                  </label>
                  <select 
                    value={filters.type}
                    onChange={(e) => handleFilterChange('type', e.target.value)}
                    style={{
                      width: '100%',
                      padding: '10px',
                      border: `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                      borderRadius: '8px',
                      fontSize: '1rem',
                      background: darkMode ? '#0f172a' : 'white',
                      color: darkMode ? 'white' : '#1e293b'
                    }}>
                    <option value="">{t.allTypes}</option>
                    {CONFIG.PROPERTY_TYPES.map(type => (
                      <option key={type} value={type}>{type}</option>
                    ))}
                  </select>
                </div>
                
                <div>
                  <label style={{ 
                    display: 'block', 
                    marginBottom: '4px', 
                    color: darkMode ? '#cbd5e1' : '#64748b',
                    fontSize: '0.9rem'
                  }}>
                    {t.minPrice} (TZS)
                  </label>
                  <input 
                    type="number"
                    placeholder="0"
                    value={filters.minPrice}
                    onChange={(e) => handleFilterChange('minPrice', e.target.value)}
                    style={{
                      width: '100%',
                      padding: '10px',
                      border: `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                      borderRadius: '8px',
                      fontSize: '1rem',
                      background: darkMode ? '#0f172a' : 'white',
                      color: darkMode ? 'white' : '#1e293b'
                    }}
                  />
                </div>
                
                <div>
                  <label style={{ 
                    display: 'block', 
                    marginBottom: '4px', 
                    color: darkMode ? '#cbd5e1' : '#64748b',
                    fontSize: '0.9rem'
                  }}>
                    {t.maxPrice} (TZS)
                  </label>
                  <input 
                    type="number"
                    placeholder="1000000"
                    value={filters.maxPrice}
                    onChange={(e) => handleFilterChange('maxPrice', e.target.value)}
                    style={{
                      width: '100%',
                      padding: '10px',
                      border: `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                      borderRadius: '8px',
                      fontSize: '1rem',
                      background: darkMode ? '#0f172a' : 'white',
                      color: darkMode ? 'white' : '#1e293b'
                    }}
                  />
                </div>
              </div>
            </div>
            
            {/* Property Listings */}
            {loading ? (
              <div style={{
                display: 'grid',
                gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))',
                gap: '2rem'
              }}>
                {[1, 2, 3].map(i => <LoadingSkeleton key={i} />)}
              </div>
            ) : (
              <>
                <div style={{
                  display: 'grid',
                  gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))',
                  gap: '2rem'
                }}>
                  {filteredProperties.map(property => (
                    <PropertyCard 
                      key={property.id} 
                      property={property}
                      onViewDetails={setSelectedProperty}
                    />
                  ))}
                </div>
                
                {filteredProperties.length === 0 && (
                  <div style={{
                    textAlign: 'center',
                    padding: '3rem',
                    background: darkMode ? '#1e293b' : 'white',
                    borderRadius: '12px',
                    color: darkMode ? '#cbd5e1' : '#64748b',
                    border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0',
                    marginTop: '2rem'
                  }}>
                    <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>üè†</div>
                    <h3 style={{ 
                      color: darkMode ? 'white' : '#1e293b', 
                      marginBottom: '0.5rem',
                      fontSize: '1.5rem'
                    }}>
                      {t.noProperties}
                    </h3>
                    <p style={{ marginBottom: '1.5rem' }}>{t.tryDifferentFilters}</p>
                    <a href="#upload" style={{
                      display: 'inline-block',
                      background: '#0d9488',
                      color: 'white',
                      textDecoration: 'none',
                      padding: '10px 20px',
                      borderRadius: '6px',
                      fontWeight: 'bold',
                      transition: 'all 0.2s'
                    }}>
                      {t.upload}
                    </a>
                  </div>
                )}
              </>
            )}
          </div>
          
          {/* Property Detail Modal */}
          {selectedProperty && (
            <PropertyDetail 
              property={selectedProperty}
              onClose={() => setSelectedProperty(null)}
            />
          )}
        </section>
      );
    };

    const UploadPage = () => {
      const { darkMode } = React.useContext(ThemeContext);
      const { t } = React.useContext(LanguageContext);
      const { user } = React.useContext(AuthContext);
      const [properties, setProperties] = React.useState(Storage.get('properties', []));
      const [formData, setFormData] = React.useState({
        title: '',
        location: '',
        type: '',
        price: '',
        bedrooms: '',
        bathrooms: '',
        description: ''
      });
      const [errors, setErrors] = React.useState({});
      const [toast, setToast] = React.useState(null);
      const [loading, setLoading] = React.useState(false);

      const handleSubmit = (e) => {
        e.preventDefault();
        setErrors({});
        
        // Validation
        const newErrors = {};
        if (!formData.title) newErrors.title = 'Title is required';
        if (!formData.location) newErrors.location = 'Location is required';
        if (!formData.type) newErrors.type = 'Property type is required';
        if (!formData.price) newErrors.price = 'Price is required';
        else if (parseInt(formData.price) <= 0) newErrors.price = 'Price must be greater than 0';
        if (!formData.bedrooms) newErrors.bedrooms = 'Bedrooms is required';
        if (!formData.bathrooms) newErrors.bathrooms = 'Bathrooms is required';
        if (!formData.description) newErrors.description = 'Description is required';
        else if (formData.description.length < 20) newErrors.description = 'Description must be at least 20 characters';
        
        if (Object.keys(newErrors).length > 0) {
          setErrors(newErrors);
          return;
        }
        
        if (!user) {
          setToast({ message: 'You must be logged in to post listings', type: 'error' });
          return;
        }
        
        if (user.role !== 'broker') {
          setToast({ message: 'Only brokers can post listings', type: 'error' });
          return;
        }
        
        setLoading(true);
        
        // Simulate API call
        setTimeout(() => {
          const newProperty = {
            id: Date.now(),
            ...formData,
            price: parseInt(formData.price),
            featured: properties.length < 3, // First 3 properties are featured
            brokerId: user.id,
            brokerName: user.name,
            brokerEmail: user.email,
            brokerPhone: user.phone || '',
            amenities: ["water", "security"]
          };
          
          const updatedProperties = [newProperty, ...properties];
          setProperties(updatedProperties);
          Storage.set('properties', updatedProperties);
          
          setToast({ message: 'Property listed successfully!', type: 'success' });
          setFormData({
            title: '',
            location: '',
            type: '',
            price: '',
            bedrooms: '',
            bathrooms: '',
            description: ''
          });
          setLoading(false);
        }, 1000);
      };

      if (!user) {
        return (
          <div style={{
            maxWidth: '600px',
            margin: '3rem auto',
            padding: '2rem',
            textAlign: 'center',
            background: darkMode ? '#1e293b' : 'white',
            borderRadius: '12px',
            border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0',
            width: '90%'
          }}>
            <h2 style={{ color: darkMode ? 'white' : '#1e293b', marginBottom: '1rem' }}>
              Access Denied
            </h2>
            <p style={{ color: darkMode ? '#cbd5e1' : '#64748b', marginBottom: '1.5rem' }}>
              You must be logged in to post property listings.
            </p>
            <a href="#login" style={{
              background: '#0d9488',
              color: 'white',
              textDecoration: 'none',
              padding: '10px 20px',
              borderRadius: '6px',
              fontWeight: 'bold',
              display: 'inline-block',
              transition: 'all 0.2s'
            }}>
              {t.login}
            </a>
          </div>
        );
      }

      if (user.role !== 'broker') {
        return (
          <div style={{
            maxWidth: '600px',
            margin: '3rem auto',
            padding: '2rem',
            textAlign: 'center',
            background: darkMode ? '#1e293b' : 'white',
            borderRadius: '12px',
            border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0',
            width: '90%'
          }}>
            <h2 style={{ color: darkMode ? 'white' : '#1e293b', marginBottom: '1rem' }}>
              Broker Access Required
            </h2>
            <p style={{ color: darkMode ? '#cbd5e1' : '#64748b', marginBottom: '1.5rem' }}>
              Only registered brokers can post property listings.
            </p>
            <a href="#signup" style={{
              background: '#0d9488',
              color: 'white',
              textDecoration: 'none',
              padding: '10px 20px',
              borderRadius: '6px',
              fontWeight: 'bold',
              display: 'inline-block',
              transition: 'all 0.2s'
            }}>
              Register as Broker
            </a>
          </div>
        );
      }

      return (
        <section id="upload" style={{ 
          padding: '2rem 1rem', 
          minHeight: '80vh',
          background: darkMode ? '#0f172a' : '#f8fafc',
          width: '100%',
          maxWidth: '100vw',
          overflow: 'hidden'
        }}>
          <div style={{ 
            maxWidth: '800px', 
            margin: '0 auto',
            width: '100%'
          }}>
            <h2 style={{ 
              fontSize: '2rem', 
              marginBottom: '1rem',
              color: darkMode ? 'white' : '#1e293b'
            }}>
              {t.upload}
            </h2>
            
            <form onSubmit={handleSubmit} style={{ marginTop: '2rem' }}>
              <div style={{ 
                background: darkMode ? '#1e293b' : 'white',
                padding: '2rem',
                borderRadius: '12px',
                boxShadow: '0 4px 15px rgba(0,0,0,0.1)',
                border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0'
              }}>
                <div style={{ display: 'grid', gap: '1rem' }}>
                  <div>
                    <label style={{ 
                      display: 'block', 
                      marginBottom: '8px', 
                      fontWeight: '500',
                      color: darkMode ? 'white' : '#1e293b'
                    }}>
                      {t.title}
                    </label>
                    <input 
                      type="text"
                      value={formData.title}
                      onChange={(e) => {
                        setFormData({...formData, title: e.target.value});
                        setErrors({...errors, title: ''});
                      }}
                      placeholder={t.exampleTitle}
                      required
                      style={{
                        width: '100%',
                        padding: '12px',
                        border: errors.title ? '1px solid #ef4444' : `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                        borderRadius: '8px',
                        fontSize: '1rem',
                        background: darkMode ? '#0f172a' : 'white',
                        color: darkMode ? 'white' : '#1e293b'
                      }}
                    />
                    {errors.title && (
                      <span style={{ color: '#ef4444', fontSize: '0.875rem', marginTop: '4px', display: 'block' }}>
                        {errors.title}
                      </span>
                    )}
                  </div>
                  
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem' }}>
                    <div>
                      <label style={{ 
                        display: 'block', 
                        marginBottom: '8px', 
                        fontWeight: '500',
                        color: darkMode ? 'white' : '#1e293b'
                      }}>
                        {t.location}
                      </label>
                      <select 
                        value={formData.location}
                        onChange={(e) => {
                          setFormData({...formData, location: e.target.value});
                          setErrors({...errors, location: ''});
                        }}
                        required
                        style={{
                          width: '100%',
                          padding: '12px',
                          border: errors.location ? '1px solid #ef4444' : `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                          borderRadius: '8px',
                          fontSize: '1rem',
                          background: darkMode ? '#0f172a' : 'white',
                          color: darkMode ? 'white' : '#1e293b'
                        }}>
                        <option value="">{t.selectLocation}</option>
                        {CONFIG.LOCATIONS.map(loc => (
                          <option key={loc} value={loc}>{loc}</option>
                        ))}
                      </select>
                      {errors.location && (
                        <span style={{ color: '#ef4444', fontSize: '0.875rem', marginTop: '4px', display: 'block' }}>
                          {errors.location}
                        </span>
                      )}
                    </div>
                    
                    <div>
                      <label style={{ 
                        display: 'block', 
                        marginBottom: '8px', 
                        fontWeight: '500',
                        color: darkMode ? 'white' : '#1e293b'
                      }}>
                        {t.type}
                      </label>
                      <select 
                        value={formData.type}
                        onChange={(e) => {
                          setFormData({...formData, type: e.target.value});
                          setErrors({...errors, type: ''});
                        }}
                        required
                        style={{
                          width: '100%',
                          padding: '12px',
                          border: errors.type ? '1px solid #ef4444' : `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                          borderRadius: '8px',
                          fontSize: '1rem',
                          background: darkMode ? '#0f172a' : 'white',
                          color: darkMode ? 'white' : '#1e293b'
                        }}>
                        <option value="">{t.selectType}</option>
                        {CONFIG.PROPERTY_TYPES.map(type => (
                          <option key={type} value={type}>{type}</option>
                        ))}
                      </select>
                      {errors.type && (
                        <span style={{ color: '#ef4444', fontSize: '0.875rem', marginTop: '4px', display: 'block' }}>
                          {errors.type}
                        </span>
                      )}
                    </div>
                  </div>
                  
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem' }}>
                    <div>
                      <label style={{ 
                        display: 'block', 
                        marginBottom: '8px', 
                        fontWeight: '500',
                        color: darkMode ? 'white' : '#1e293b'
                      }}>
                        {t.price} (TZS)
                      </label>
                      <input 
                        type="number"
                        value={formData.price}
                        onChange={(e) => {
                          setFormData({...formData, price: e.target.value});
                          setErrors({...errors, price: ''});
                        }}
                        placeholder="135000"
                        required
                        style={{
                          width: '100%',
                          padding: '12px',
                          border: errors.price ? '1px solid #ef4444' : `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                          borderRadius: '8px',
                          fontSize: '1rem',
                          background: darkMode ? '#0f172a' : 'white',
                          color: darkMode ? 'white' : '#1e293b'
                        }}
                      />
                      {errors.price && (
                        <span style={{ color: '#ef4444', fontSize: '0.875rem', marginTop: '4px', display: 'block' }}>
                          {errors.price}
                        </span>
                      )}
                    </div>
                    
                    <div>
                      <label style={{ 
                        display: 'block', 
                        marginBottom: '8px', 
                        fontWeight: '500',
                        color: darkMode ? 'white' : '#1e293b'
                      }}>
                        {t.bedrooms}
                      </label>
                      <select 
                        value={formData.bedrooms}
                        onChange={(e) => {
                          setFormData({...formData, bedrooms: e.target.value});
                          setErrors({...errors, bedrooms: ''});
                        }}
                        required
                        style={{
                          width: '100%',
                          padding: '12px',
                          border: errors.bedrooms ? '1px solid #ef4444' : `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                          borderRadius: '8px',
                          fontSize: '1rem',
                          background: darkMode ? '#0f172a' : 'white',
                          color: darkMode ? 'white' : '#1e293b'
                        }}>
                        <option value="">{t.select}</option>
                        <option value="Studio">Studio</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4+">4+</option>
                      </select>
                      {errors.bedrooms && (
                        <span style={{ color: '#ef4444', fontSize: '0.875rem', marginTop: '4px', display: 'block' }}>
                          {errors.bedrooms}
                        </span>
                      )}
                    </div>
                    
                    <div>
                      <label style={{ 
                        display: 'block', 
                        marginBottom: '8px', 
                        fontWeight: '500',
                        color: darkMode ? 'white' : '#1e293b'
                      }}>
                        {t.bathrooms}
                      </label>
                      <select 
                        value={formData.bathrooms}
                        onChange={(e) => {
                          setFormData({...formData, bathrooms: e.target.value});
                          setErrors({...errors, bathrooms: ''});
                        }}
                        required
                        style={{
                          width: '100%',
                          padding: '12px',
                          border: errors.bathrooms ? '1px solid #ef4444' : `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                          borderRadius: '8px',
                          fontSize: '1rem',
                          background: darkMode ? '#0f172a' : 'white',
                          color: darkMode ? 'white' : '#1e293b'
                        }}>
                        <option value="">{t.select}</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4+">4+</option>
                      </select>
                      {errors.bathrooms && (
                        <span style={{ color: '#ef4444', fontSize: '0.875rem', marginTop: '4px', display: 'block' }}>
                          {errors.bathrooms}
                        </span>
                      )}
                    </div>
                  </div>
                  
                  <div>
                    <label style={{ 
                      display: 'block', 
                      marginBottom: '8px', 
                      fontWeight: '500',
                      color: darkMode ? 'white' : '#1e293b'
                    }}>
                      {t.description}
                    </label>
                    <textarea 
                      value={formData.description}
                      onChange={(e) => {
                        setFormData({...formData, description: e.target.value});
                        setErrors({...errors, description: ''});
                      }}
                      rows="5"
                      placeholder={t.descriptionPlaceholder}
                      required
                      style={{
                        width: '100%',
                        padding: '12px',
                        border: errors.description ? '1px solid #ef4444' : `1px solid ${darkMode ? '#475569' : '#cbd5e1'}`,
                        borderRadius: '8px',
                        fontSize: '1rem',
                        background: darkMode ? '#0f172a' : 'white',
                        color: darkMode ? 'white' : '#1e293b',
                        resize: 'vertical'
                      }}
                    ></textarea>
                    {errors.description && (
                      <span style={{ color: '#ef4444', fontSize: '0.875rem', marginTop: '4px', display: 'block' }}>
                        {errors.description}
                      </span>
                    )}
                  </div>
                  
                  <button 
                    type="submit" 
                    disabled={loading}
                    style={{
                      background: loading ? '#94a3b8' : '#0d9488',
                      color: 'white',
                      border: 'none',
                      padding: '15px 30px',
                      borderRadius: '8px',
                      fontSize: '1.1rem',
                      fontWeight: 'bold',
                      cursor: loading ? 'not-allowed' : 'pointer',
                      marginTop: '1rem',
                      transition: 'all 0.2s'
                    }}
                  >
                    {loading ? `${t.loading}...` : t.upload}
                  </button>
                </div>
              </div>
            </form>
          </div>
          
          {toast && (
            <Toast 
              message={toast.message} 
              type={toast.type} 
              onClose={() => setToast(null)} 
            />
          )}
        </section>
      );
    };

    const DashboardPage = () => {
      const { darkMode } = React.useContext(ThemeContext);
      const { t } = React.useContext(LanguageContext);
      const { user, messages, favorites, markMessageAsRead } = React.useContext(AuthContext);
      const [properties, setProperties] = React.useState(Storage.get('properties', []));
      const [activeTab, setActiveTab] = React.useState('listings');
      
      if (!user) {
        return (
          <div style={{
            maxWidth: '600px',
            margin: '3rem auto',
            padding: '2rem',
            textAlign: 'center',
            background: darkMode ? '#1e293b' : 'white',
            borderRadius: '12px',
            border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0',
            width: '90%'
          }}>
            <h2 style={{ color: darkMode ? 'white' : '#1e293b', marginBottom: '1rem' }}>
              Please Login
            </h2>
            <p style={{ color: darkMode ? '#cbd5e1' : '#64748b', marginBottom: '1.5rem' }}>
              You need to be logged in to access the dashboard.
            </p>
            <a href="#login" style={{
              background: '#0d9488',
              color: 'white',
              textDecoration: 'none',
              padding: '10px 20px',
              borderRadius: '6px',
              fontWeight: 'bold',
              display: 'inline-block',
              transition: 'all 0.2s'
            }}>
              {t.login}
            </a>
          </div>
        );
      }

      const userProperties = user.role === 'broker' 
        ? properties.filter(p => p.brokerId === user.id)
        : [];
      
      const favoriteProperties = properties.filter(p => favorites.includes(p.id));
      const userMessages = messages.filter(m => 
        user.role === 'broker' ? m.to === user.name : m.fromEmail === user.email
      );

      return (
        <section id="dashboard" style={{ 
          padding: '2rem 1rem', 
          minHeight: '80vh',
          background: darkMode ? '#0f172a' : '#f8fafc',
          width: '100%',
          maxWidth: '100vw',
          overflow: 'hidden'
        }}>
          <div style={{ 
            maxWidth: '1200px', 
            margin: '0 auto',
            width: '100%'
          }}>
            <div style={{ 
              background: darkMode ? '#1e293b' : 'white',
              padding: '2rem',
              borderRadius: '12px',
              boxShadow: '0 4px 15px rgba(0,0,0,0.1)',
              marginBottom: '2rem',
              border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0'
            }}>
              <h2 style={{ 
                margin: '0 0 1rem 0',
                color: darkMode ? 'white' : '#1e293b'
              }}>
                {t.welcome}, {user.name}!
              </h2>
              <div style={{ 
                color: darkMode ? '#cbd5e1' : '#64748b',
                marginBottom: '1rem',
                display: 'flex',
                alignItems: 'center',
                gap: '1rem',
                flexWrap: 'wrap'
              }}>
                <span>Role:</span>
                <span style={{ 
                  background: user.role === 'broker' ? '#3b82f6' : '#10b981',
                  color: 'white',
                  padding: '4px 12px',
                  borderRadius: '20px',
                  fontSize: '0.9rem',
                  fontWeight: 'bold'
                }}>
                  {user.role === 'broker' ? t.broker : t.buyer}
                </span>
              </div>
              <p style={{ 
                color: darkMode ? '#cbd5e1' : '#64748b',
                marginBottom: '0.5rem'
              }}>
                <strong>Email:</strong> {user.email}
              </p>
              {user.phone && (
                <p style={{ color: darkMode ? '#cbd5e1' : '#64748b' }}>
                  <strong>Phone:</strong> {user.phone}
                </p>
              )}
            </div>
            
            {/* Tabs */}
            <div style={{ 
              display: 'flex', 
              borderBottom: `1px solid ${darkMode ? '#334155' : '#e2e8f0'}`,
              marginBottom: '1.5rem',
              overflowX: 'auto'
            }}>
              <button onClick={() => setActiveTab('listings')} style={{
                background: 'none',
                border: 'none',
                padding: '10px 20px',
                color: activeTab === 'listings' ? '#0d9488' : (darkMode ? '#cbd5e1' : '#64748b'),
                borderBottom: activeTab === 'listings' ? '2px solid #0d9488' : 'none',
                cursor: 'pointer',
                fontSize: '1rem',
                whiteSpace: 'nowrap'
              }}>
                {user.role === 'broker' ? t.myListings : t.favorites}
              </button>
              
              <button onClick={() => setActiveTab('messages')} style={{
                background: 'none',
                border: 'none',
                padding: '10px 20px',
                color: activeTab === 'messages' ? '#0d9488' : (darkMode ? '#cbd5e1' : '#64748b'),
                borderBottom: activeTab === 'messages' ? '2px solid #0d9488' : 'none',
                cursor: 'pointer',
                fontSize: '1rem',
                whiteSpace: 'nowrap'
              }}>
                {t.myMessages}
              </button>
            </div>
            
            {/* Tab Content */}
            <div>
              {activeTab === 'listings' && (
                <div>
                  {user.role === 'broker' ? (
                    <div>
                      <div style={{ 
                        display: 'flex', 
                        justifyContent: 'space-between', 
                        alignItems: 'center',
                        marginBottom: '1.5rem',
                        flexWrap: 'wrap',
                        gap: '1rem'
                      }}>
                        <h3 style={{ 
                          color: darkMode ? 'white' : '#1e293b',
                          margin: 0
                        }}>
                          My Properties ({userProperties.length})
                        </h3>
                        
                        <a href="#upload" style={{
                          background: '#0d9488',
                          color: 'white',
                          textDecoration: 'none',
                          padding: '8px 16px',
                          borderRadius: '6px',
                          fontSize: '0.9rem',
                          fontWeight: 'bold',
                          transition: 'all 0.2s'
                        }}>
                          + Add New Property
                        </a>
                      </div>
                      
                      {userProperties.length === 0 ? (
                        <div style={{
                          textAlign: 'center',
                          padding: '3rem',
                          background: darkMode ? '#1e293b' : 'white',
                          borderRadius: '12px',
                          color: darkMode ? '#cbd5e1' : '#64748b',
                          border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0'
                        }}>
                          <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>üè†</div>
                          <h3 style={{ 
                            color: darkMode ? 'white' : '#1e293b', 
                            marginBottom: '0.5rem',
                            fontSize: '1.5rem'
                          }}>
                            No Properties Listed
                          </h3>
                          <p>Start by posting your first property listing.</p>
                          <a href="#upload" style={{
                            display: 'inline-block',
                            background: '#0d9488',
                            color: 'white',
                            textDecoration: 'none',
                            padding: '10px 20px',
                            borderRadius: '6px',
                            marginTop: '1rem',
                            fontWeight: 'bold',
                            transition: 'all 0.2s'
                          }}>
                            Post First Property
                          </a>
                        </div>
                      ) : (
                        <div style={{
                          display: 'grid',
                          gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))',
                          gap: '2rem'
                        }}>
                          {userProperties.map(property => (
                            <PropertyCard 
                              key={property.id} 
                              property={property}
                              onViewDetails={() => {}}
                            />
                          ))}
                        </div>
                      )}
                    </div>
                  ) : (
                    <div>
                      <h3 style={{ 
                        color: darkMode ? 'white' : '#1e293b',
                        marginBottom: '1.5rem'
                      }}>
                        My Favorites ({favoriteProperties.length})
                      </h3>
                      
                      {favoriteProperties.length === 0 ? (
                        <div style={{
                          textAlign: 'center',
                          padding: '3rem',
                          background: darkMode ? '#1e293b' : 'white',
                          borderRadius: '12px',
                          color: darkMode ? '#cbd5e1' : '#64748b',
                          border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0'
                        }}>
                          <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>‚ù§Ô∏è</div>
                          <h3 style={{ 
                            color: darkMode ? 'white' : '#1e293b', 
                            marginBottom: '0.5rem',
                            fontSize: '1.5rem'
                          }}>
                            No Favorites Yet
                          </h3>
                          <p>Click the heart icon on properties to save them here.</p>
                          <a href="#listings" style={{
                            display: 'inline-block',
                            background: '#0d9488',
                            color: 'white',
                            textDecoration: 'none',
                            padding: '10px 20px',
                            borderRadius: '6px',
                            marginTop: '1rem',
                            fontWeight: 'bold',
                            transition: 'all 0.2s'
                          }}>
                            Browse Properties
                          </a>
                        </div>
                      ) : (
                        <div style={{
                          display: 'grid',
                          gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))',
                          gap: '2rem'
                        }}>
                          {favoriteProperties.map(property => (
                            <PropertyCard 
                              key={property.id} 
                              property={property}
                              onViewDetails={() => {}}
                            />
                          ))}
                        </div>
                      )}
                    </div>
                  )}
                </div>
              )}
              
              {activeTab === 'messages' && (
                <div>
                  <h3 style={{ 
                    color: darkMode ? 'white' : '#1e293b',
                    marginBottom: '1.5rem'
                  }}>
                    My Messages ({userMessages.length})
                  </h3>
                  
                  {userMessages.length === 0 ? (
                    <div style={{
                      textAlign: 'center',
                      padding: '3rem',
                      background: darkMode ? '#1e293b' : 'white',
                      borderRadius: '12px',
                      color: darkMode ? '#cbd5e1' : '#64748b',
                      border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0'
                    }}>
                      <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>üí¨</div>
                      <h3 style={{ 
                        color: darkMode ? 'white' : '#1e293b', 
                        marginBottom: '0.5rem',
                        fontSize: '1.5rem'
                      }}>
                        No Messages
                      </h3>
                      <p>
                        {user.role === 'broker' 
                          ? 'You will receive messages from buyers here.'
                          : 'Contact brokers to send messages.'}
                      </p>
                    </div>
                  ) : (
                    <div style={{
                      background: darkMode ? '#1e293b' : 'white',
                      borderRadius: '12px',
                      border: darkMode ? '1px solid #334155' : '1px solid #e2e8f0',
                      overflow: 'hidden'
                    }}>
                      {userMessages.map((message, index) => (
                        <div key={message.id} style={{
                          padding: '1rem',
                          borderBottom: index < userMessages.length - 1 
                            ? `1px solid ${darkMode ? '#334155' : '#e2e8f0'}` 
                            : 'none',
                          background: !message.read ? (darkMode ? '#0f172a' : '#f8fafc') : 'transparent'
                        }}>
                          <div style={{ 
                            display: 'flex', 
                            justifyContent: 'space-between',
                            alignItems: 'flex-start',
                            marginBottom: '0.5rem',
                            flexWrap: 'wrap',
                            gap: '0.5rem'
                          }}>
                            <div>
                              <strong style={{ 
                                color: darkMode ? 'white' : '#1e293b',
                                display: 'block'
                              }}>
                                {user.role === 'broker' ? `From: ${message.from}` : `To: ${message.to}`}
                              </strong>
                              <div style={{ 
                                color: darkMode ? '#94a3b8' : '#64748b',
                                fontSize: '0.9rem'
                              }}>
                                Property: {message.propertyTitle}
                              </div>
                            </div>
                            <small style={{ 
                              color: darkMode ? '#94a3b8' : '#64748b',
                              whiteSpace: 'nowrap'
                            }}>
                              {new Date(message.timestamp).toLocaleDateString()}
                            </small>
                          </div>
                          <div style={{ 
                            color: darkMode ? '#cbd5e1' : '#64748b',
                            background: darkMode ? '#0f172a' : '#f8fafc',
                            padding: '0.75rem',
                            borderRadius: '6px',
                            marginTop: '0.5rem',
                            wordBreak: 'break-word'
                          }}>
                            {message.message}
                          </div>
                          {!message.read && user.role === 'broker' && (
                            <button 
                              onClick={() => markMessageAsRead(message.id)}
                              style={{
                                background: '#0d9488',
                                color: 'white',
                                border: 'none',
                                padding: '5px 10px',
                                borderRadius: '4px',
                                fontSize: '0.8rem',
                                marginTop: '0.5rem',
                                cursor: 'pointer',
                                transition: 'all 0.2s'
                              }}
                            >
                              Mark as Read
                            </button>
                          )}
                        </div>
                      ))}
                    </div>
                  )}
                </div>
              )}
            </div>
          </div>
        </section>
      );
    };

    const HomePage = () => {
      const { darkMode } = React.useContext(ThemeContext);
      const { t } = React.useContext(LanguageContext);
      const properties = Storage.get('properties', []);

      return (
        <div style={{ width: '100%', maxWidth: '100vw', overflow: 'hidden' }}>
          {/* Hero Section */}
          <section style={{
            padding: '4rem 1rem',
            textAlign: 'center',
            background: 'linear-gradient(135deg, #0d9488 0%, #14b8a6 100%)',
            color: 'white',
            width: '100%'
          }}>
            <div style={{ 
              maxWidth: '1200px', 
              margin: '0 auto',
              width: '100%'
            }}>
              <h1 style={{ 
                fontSize: '2.5rem', 
                marginBottom: '1rem',
                lineHeight: '1.2'
              }}>
                Pata Nyumba Bora Tanzania
              </h1>
              <p style={{ 
                fontSize: '1.2rem', 
                opacity: 0.9,
                marginBottom: '2rem',
                maxWidth: '600px',
                margin: '0 auto 2rem'
              }}>
                Dar es Salaam ‚Ä¢ Arusha ‚Ä¢ Mwanza ‚Ä¢ Dodoma
              </p>
              <a href="#listings" style={{
                display: 'inline-block',
                background: 'white',
                color: '#0d9488',
                padding: '12px 30px',
                borderRadius: '25px',
                textDecoration: 'none',
                fontWeight: 'bold',
                fontSize: '1.1rem',
                boxShadow: '0 4px 15px rgba(0,0,0,0.2)',
                transition: 'all 0.2s'
              }}>
                {t.search}
              </a>
            </div>
          </section>
          
          {/* Featured Properties */}
          <section style={{ 
            padding: '3rem 1rem',
            background: darkMode ? '#0f172a' : '#f8fafc',
            width: '100%'
          }}>
            <div style={{ 
              maxWidth: '1200px', 
              margin: '0 auto',
              width: '100%'
            }}>
              <div style={{ 
                display: 'flex', 
                justifyContent: 'space-between', 
                alignItems: 'center',
                marginBottom: '2rem',
                flexWrap: 'wrap',
                gap: '1rem'
              }}>
                <h2 style={{ 
                  fontSize: '2rem',
                  color: darkMode ? 'white' : '#1e293b',
                  margin: 0
                }}>
                  {t.featured}
                </h2>
                <a href="#listings" style={{
                  color: '#0d9488',
                  textDecoration: 'none',
                  fontWeight: '500',
                  fontSize: '1rem'
                }}>
                  {t.viewAll} ‚Üí
                </a>
              </div>
              
              <div style={{
                display: 'grid',
                gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))',
                gap: '2rem'
              }}>
                {properties
                  .filter(p => p.featured)
                  .slice(0, 3)
                  .map(property => (
                    <PropertyCard 
                      key={property.id} 
                      property={property}
                      onViewDetails={(p) => {
                        window.location.hash = `#property-${p.id}`;
                      }}
                    />
                  ))}
              </div>
            </div>
          </section>
        </div>
      );
    };

    const Footer = () => {
      const { darkMode } = React.useContext(ThemeContext);
      const { t } = React.useContext(LanguageContext);

      return (
        <footer style={{
          background: darkMode ? '#1e293b' : '#1e293b',
          color: 'white',
          padding: '3rem 1rem',
          marginTop: 'auto',
          width: '100%'
        }}>
          <div style={{ 
            maxWidth: '1200px', 
            margin: '0 auto',
            width: '100%'
          }}>
            <div style={{
              display: 'grid',
              gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',
              gap: '2rem',
              marginBottom: '2rem'
            }}>
              <div>
                <h3 style={{ fontSize: '1.5rem', marginBottom: '1rem' }}>HouseLink</h3>
                <p style={{ color: '#cbd5e1', lineHeight: '1.6' }}>
                  Nyumba bora Tanzania. Tupate nyumba unayotaka kwa urahisi na uhakika.
                </p>
              </div>
              
              <div>
                <h4 style={{ marginBottom: '1rem' }}>Miji Mikubwa</h4>
                <ul style={{ listStyle: 'none', padding: 0, color: '#cbd5e1' }}>
                  <li style={{ marginBottom: '8px' }}>Dar es Salaam</li>
                  <li style={{ marginBottom: '8px' }}>Arusha</li>
                  <li style={{ marginBottom: '8px' }}>Mwanza</li>
                  <li style={{ marginBottom: '8px' }}>Dodoma</li>
                </ul>
              </div>
              
              <div>
                <h4 style={{ marginBottom: '1rem' }}>Weka Tangazo</h4>
                <ul style={{ listStyle: 'none', padding: 0, color: '#cbd5e1' }}>
                  <li style={{ marginBottom: '8px' }}>
                    <a href="#upload" style={{ color: '#cbd5e1', textDecoration: 'none' }}>
                      Weka Tangazo
                    </a>
                  </li>
                  <li style={{ marginBottom: '8px' }}>Bei za Soko</li>
                  <li style={{ marginBottom: '8px' }}>Mwongozo wa Mmiliki</li>
                </ul>
              </div>
              
              <div>
                <h4 style={{ marginBottom: '1rem' }}>Usaidizi</h4>
                <ul style={{ listStyle: 'none', padding: 0, color: '#cbd5e1' }}>
                  <li style={{ marginBottom: '8px' }}>Maswali Yanayoulizwa</li>
                  <li style={{ marginBottom: '8px' }}>Vidokezo vya Usalama</li>
                  <li style={{ marginBottom: '8px' }}>
                    <a href="#contact" style={{ color: '#cbd5e1', textDecoration: 'none' }}>
                      Wasiliana Nasi
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            
            <div style={{ 
              borderTop: '1px solid #334155', 
              paddingTop: '2rem',
              textAlign: 'center',
              color: '#94a3b8'
            }}>
              <p>{t.copyright} ‚Ä¢ {t.allRights}</p>
            </div>
          </div>
        </footer>
      );
    };

    const App = () => {
      const [currentPage, setCurrentPage] = React.useState('home');
      const [selectedProperty, setSelectedProperty] = React.useState(null);
      
      React.useEffect(() => {
        const handleHashChange = () => {
          const hash = window.location.hash.replace('#', '');
          
          // Check if it's a property detail page
          if (hash.startsWith('property-')) {
            const propertyId = parseInt(hash.replace('property-', ''));
            const properties = Storage.get('properties', []);
            const property = properties.find(p => p.id === propertyId);
            
            if (property) {
              setSelectedProperty(property);
              setCurrentPage('listings'); // Show listings with modal
            } else {
              setCurrentPage('home');
            }
          } else {
            setSelectedProperty(null);
            setCurrentPage(hash || 'home');
          }
        };
        
        handleHashChange();
        window.addEventListener('hashchange', handleHashChange);
        
        return () => {
          window.removeEventListener('hashchange', handleHashChange);
        };
      }, []);
      
      const renderPage = () => {
        switch(currentPage) {
          case 'home':
            return <HomePage />;
          case 'listings':
            return (
              <>
                <ListingsPage />
                {selectedProperty && (
                  <PropertyDetail 
                    property={selectedProperty}
                    onClose={() => {
                      setSelectedProperty(null);
                      window.location.hash = '#listings';
                    }}
                  />
                )}
              </>
            );
          case 'upload':
            return <UploadPage />;
          case 'favorites':
            return <DashboardPage />;
          case 'dashboard':
            return <DashboardPage />;
          case 'login':
            return <LoginPage />;
          case 'signup':
            return <SignupPage />;
          default:
            return <HomePage />;
        }
      };
      
      return (
        <div style={{ 
          display: 'flex', 
          flexDirection: 'column', 
          minHeight: '100vh',
          width: '100%',
          maxWidth: '100vw',
          overflowX: 'hidden'
        }}>
          <Navbar />
          <main style={{ flex: 1, width: '100%' }}>
            {renderPage()}
          </main>
          <Footer />
        </div>
      );
    };

    // Main render
    const MainApp = () => (
      <ThemeProvider>
        <LanguageProvider>
          <AuthProvider>
            <App />
          </AuthProvider>
        </LanguageProvider>
      </ThemeProvider>
    );

    ReactDOM.render(<MainApp />, document.getElementById('app'));
  </script>

  <style>
    /* Responsive Media Queries */
    @media (max-width: 768px) {
      .mobile-menu-button {
        display: block !important;
      }
      
      .mobile-hidden {
        display: none !important;
      }
      
      h1 {
        font-size: 2rem !important;
      }
      
      h2 {
        font-size: 1.5rem !important;
      }
      
      section {
        padding: 1.5rem 1rem !important;
      }
      
      .grid-responsive {
        grid-template-columns: 1fr !important;
      }
      
      .hero-section h1 {
        font-size: 2rem !important;
      }
      
      .hero-section p {
        font-size: 1rem !important;
      }
    }
    
    @media (max-width: 480px) {
      h1 {
        font-size: 1.75rem !important;
      }
      
      h2 {
        font-size: 1.25rem !important;
      }
      
      .property-card {
        min-width: 100% !important;
      }
      
      button, a.button {
        padding: 10px 15px !important;
        font-size: 0.9rem !important;
      }
    }
    
    /* Accessibility improvements */
    button:focus-visible,
    a:focus-visible,
    input:focus-visible,
    select:focus-visible,
    textarea:focus-visible {
      outline: 2px solid #0d9488 !important;
      outline-offset: 2px !important;
    }
    
    /* Print styles */
    @media print {
      .no-print {
        display: none !important;
      }
      
      body {
        background: white !important;
        color: black !important;
      }
      
      a {
        color: black !important;
        text-decoration: underline !important;
      }
    }
  </style>
</body>
</html>
